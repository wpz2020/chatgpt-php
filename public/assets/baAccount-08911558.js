import{defineComponent as S,ref as E,reactive as C,resolveComponent as c,resolveDirective as z,openBlock as m,createElementBlock as w,createVNode as a,unref as e,withCtx as n,withDirectives as y,createElementVNode as r,toDisplayString as u,createBlock as $,createTextVNode as f,withKeys as G}from"vue";import{F as B}from"./index-39d73c69.js";import{b as _}from"./validate-e09b6b50.js";import{useI18n as K}from"vue-i18n";import{i as U,_ as L}from"./index-89e26330.js";import{u as M,s as g,b as O,c as T}from"./store-fda3112c.js";import"./index-0a827c2c.js";import"element-plus";import"vue-router";import"./controllerUrls-941681c3.js";import"./index-d3b20950.js";import"pinia";import"vue-demi";const j={key:0,class:"userinfo"},H={class:"user-avatar-box"},J=["src"],Q={class:"username"},W={class:"user-integral"},X={class:"userinfo-buttons"},Y={key:1,class:"ba-login"},Z={class:"ba-title"},ee=["src"],oe={target:"_blank",class:"ba-account-register",href:"https://buildadmin.com/user/login?type=register"},te=S({__name:"baAccount",setup(ae){const{t:s}=K(),i=M(),b=E(),t=C({loading:!1,form:{tab:"login",username:"",password:"",captcha:"",captchaId:U(),keep:!1}}),F=C({username:[_({name:"required",title:s("module.User name")})],captcha:[_({name:"required",title:s("module.Verification Code")})],password:[_({name:"required",title:s("module.Password")}),_({name:"password"})]}),x=d=>{window.open(d)},V=(d=void 0)=>{d.validate(o=>{o?(t.loading=!0,T("post",t.form).then(v=>{g.dialog.baAccount=!1,t.loading=!1,i.dataFill(v.data.userInfo)}).catch(()=>{t.loading=!1,h()})):h()})},h=()=>{t.form.captcha="",t.form.captchaId=U()};return(d,o)=>{const v=c("Icon"),p=c("el-button"),D=c("el-input"),k=c("el-col"),P=c("el-row"),I=c("el-form-item"),R=c("el-form"),q=c("el-dialog"),A=z("blur"),N=z("loading");return m(),w("div",null,[a(q,{modelValue:e(g).dialog.baAccount,"onUpdate:modelValue":o[7]||(o[7]=l=>e(g).dialog.baAccount=l),class:"ba-account-dialog",width:"25%",title:e(s)("module.Member information")},{default:n(()=>[e(i).token?y((m(),w("div",j,[r("div",H,[r("img",{class:"user-avatar",src:e(i).avatar,alt:""},null,8,J),a(v,{class:"user-avatar-gender",name:e(i).getGenderIcon().name,size:"14",color:e(i).getGenderIcon().color},null,8,["name","color"])]),r("p",Q,u(e(i).nickname),1),r("p",W,[r("span",null,u(d.$t("module.Integral")+" "+e(i).score),1),r("span",null,u(d.$t("module.Balance")+" "+e(i).money),1)]),r("div",X,[y((m(),$(p,{onClick:o[0]||(o[0]=l=>x("https://buildadmin.com/user/account/moduleOrders")),size:"default",type:"primary"},{default:n(()=>[f(u(d.$t("module.My module")),1)]),_:1})),[[A]]),y((m(),$(p,{onClick:o[1]||(o[1]=l=>e(i).logout()),size:"default",type:"warning"},{default:n(()=>[f(u(d.$t("module.Logout login")),1)]),_:1})),[[A]])])])),[[N,e(g).loading.common]]):(m(),w("div",Y,[r("h3",Z,u(e(s)("module.Log in to the buildadmin module marketplace")),1),a(R,{onKeyup:o[6]||(o[6]=G(l=>V(b.value),["enter"])),ref_key:"baAccountFormRef",ref:b,rules:F,class:"ba-account-login-form",model:t.form},{default:n(()=>[a(B,{modelValue:t.form.username,"onUpdate:modelValue":o[2]||(o[2]=l=>t.form.username=l),type:"string",prop:"username",placeholder:e(s)("module.Please enter buildadmin account name or email"),"input-attr":{size:"large"}},null,8,["modelValue","placeholder"]),a(B,{modelValue:t.form.password,"onUpdate:modelValue":o[3]||(o[3]=l=>t.form.password=l),type:"password",prop:"password",placeholder:e(s)("module.Please enter the buildadmin account password"),"input-attr":{size:"large"}},null,8,["modelValue","placeholder"]),a(I,{prop:"captcha"},{default:n(()=>[a(P,{class:"w100"},{default:n(()=>[a(k,{span:16},{default:n(()=>[a(D,{modelValue:t.form.captcha,"onUpdate:modelValue":o[4]||(o[4]=l=>t.form.captcha=l),size:"large",clearable:"",autocomplete:"off",placeholder:e(s)("module.Please enter the login verification code")},null,8,["modelValue","placeholder"])]),_:1}),a(k,{class:"captcha-box",span:8},{default:n(()=>[r("img",{onClick:h,class:"captcha-img",src:e(O)()+"&id="+t.form.captchaId},null,8,ee)]),_:1})]),_:1})]),_:1}),a(I,{class:"form-buttons"},{default:n(()=>[a(p,{onClick:o[5]||(o[5]=l=>V(b.value)),loading:t.loading,round:"",type:"primary",size:"large"},{default:n(()=>[f(u(e(s)("module.Sign in")),1)]),_:1},8,["loading"]),r("a",oe,[a(p,{round:"",plain:"",type:"info",size:"large"},{default:n(()=>[f(u(e(s)("module.Register")),1)]),_:1})])]),_:1})]),_:1},8,["rules","model"])]))]),_:1},8,["modelValue","title"])])}}});const be=L(te,[["__scopeId","data-v-3a2a3a6d"]]);export{be as default};
