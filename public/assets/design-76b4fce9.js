import{bp as Ie,bq as xe,d as Ne,$ as Re,H as ce,at as Ae,r as ue,o as Ke,b3 as A,a3 as Y,a$ as Q,V as me,f as n,c as p,g as m,a as d,b as u,j as i,z as D,Y as b,h as C,i as v,F as h,J as k,x as U,ar as $e,y as fe,aL as K,I as pe,N as je,br as be,aA as Ge,e as P,aC as ye,C as qe,D as Be,k as Ee,a0 as z,_ as ze}from"./index-9250cf41.js";import{S as ge,B as Fe}from"./index-47490f62.js";import{F as f}from"./index-5cf5ba2e.js";import{f as $,d as ve,t as I,g as Me,a as X,b as Oe,c as Je,e as he,h as He,s as L,p as We,i as Ye}from"./crud-acd42ce0.js";import{b as j,a as Qe}from"./validate-d30190a1.js";import"./controllerUrls-941681c3.js";import"./index-bb9265a5.js";var Se=1/0,Xe=17976931348623157e292;function Z(y){if(!y)return y===0?y:0;if(y=Ie(y),y===Se||y===-Se){var o=y<0?-1:1;return o*Xe}return y===y?y:0}var Ze=Math.ceil,el=Math.max;function ll(y,o,S,V){for(var N=-1,T=el(Ze((o-y)/(S||1)),0),R=Array(T);T--;)R[V?T:++N]=y,y+=S;return R}function tl(y){return function(o,S,V){return V&&typeof V!="number"&&xe(o,S,V)&&(S=V=void 0),o=Z(o),S===void 0?(S=o,o=0):S=Z(S),V=V===void 0?o<S?1:-1:Z(V),ll(o,S,V,y)}}var al=tl();const Ve=al,ol=y=>(qe("data-v-9df8a32c"),y=y(),Be(),y),il={class:"default-main"},rl={class:"header-config-box"},dl={class:"header"},nl={class:"header-item-box"},sl={class:"header-right"},cl={key:0,class:"header-senior-config-box"},ul={class:"header-senior-config-form"},ml={class:"default-sort-field-box"},fl=["onClick","data-id"],pl={class:"design-field"},bl={class:"design-field"},yl={class:"design-field-right"},gl={key:0,class:"design-field-empty"},Fl={class:"field-config ba-scroll-style"},vl={key:0,class:"design-field-empty"},hl={class:"field-inline"},Sl={class:"field-inline"},Vl={class:"field-inline"},wl={class:"confirm-generate-dialog-body"},Pl=ol(()=>m("br",null,null,-1)),kl={class:"confirm-generate-dialog-footer"},_l=Ne({__name:"design",setup(y){const{t:o}=Re(),S=Ee(),V=ce(),N=ce(),T=Ae();let R=1;const e=ue({loading:{init:!1,generate:!1,remoteSelect:!1},table:{name:"",comment:"",quickSearchField:[],defaultSortField:"",formFields:[],columnFields:[],defaultSortType:"desc",modelFile:"",controllerFile:"",validateFile:"",webViewsDir:""},fields:[],activateField:-1,fieldCollapseName:["common","base","senior"],remoteSelectPre:{show:!1,index:-1,dbList:[],fieldList:[],modelFileList:[],controllerFileList:[],loading:!1,hideDelField:!1,form:{table:"",pk:"",label:"",joinField:[],modelFile:"",controllerFile:""}},showHeaderSeniorConfig:!1,confirmGenerate:{show:!1,table:!1,controller:!1}}),we=a=>{e.activateField=a},Pe=()=>{const a=A(e.fields[e.activateField]);for(const l in a.table)a.table[l]=a.table[l].value;for(const l in a.form)a.form[l]=a.form[l].value;e.fields[e.activateField]=G(a)},ee=a=>{for(const l in I)for(const r in e.table[I[l]])Q(e.fields,"name",e.table[I[l]][r])||(e.table[I[l]][r]=a);e.table.defaultSortField&&(Q(e.fields,"name",e.table.defaultSortField)||(e.table.defaultSortField=a))},le=a=>{if(e.fields[a]){e.activateField=-1,e.fields[a].name==e.table.defaultSortField&&(e.table.defaultSortField="");for(const l in I){const r=e.table[I[l]].findIndex(c=>c==e.fields[a].name);r!=-1&&e.table[I[l]].splice(r,1)}e.fields.splice(a,1)}},te=(a,l=!1)=>{e.remoteSelectPre.show=!0,e.remoteSelectPre.loading=!0,e.remoteSelectPre.index=a,e.remoteSelectPre.hideDelField=l,Me().then(r=>{e.remoteSelectPre.dbList=r.data.dbs,e.fields[a]&&e.fields[a].form["remote-table"].value&&(e.remoteSelectPre.form.table=e.fields[a].form["remote-table"].value,e.remoteSelectPre.form.pk=e.fields[a].form["remote-pk"].value,e.remoteSelectPre.form.label=e.fields[a].form["remote-field"].value,e.remoteSelectPre.form.controllerFile=e.fields[a].form["remote-controller"].value,e.remoteSelectPre.form.modelFile=e.fields[a].form["remote-model"].value,e.remoteSelectPre.form.joinField=e.fields[a].form["relation-fields"].value.split(","),K(e.remoteSelectPre.fieldList)&&be(e.fields[a].form["remote-table"].value).then(c=>{const F={};for(const w in c.data.fieldList)F[w]=(w?w+" - ":"")+c.data.fieldList[w];e.remoteSelectPre.fieldList=F}),(K(e.remoteSelectPre.modelFileList)||K(e.remoteSelectPre.controllerFileList))&&X(e.fields[a].form["remote-table"].value).then(c=>{e.remoteSelectPre.modelFileList=c.data.modelFileList,e.remoteSelectPre.controllerFileList=c.data.controllerFileList}))}).finally(()=>{e.remoteSelectPre.loading=!1})},ke=(a,l)=>{if(["remoteSelect","remoteSelects"].includes(l.designType))return te(a)},M=()=>{e.confirmGenerate.show=!1},ae=()=>{e.loading.generate=!0;const a=A(e.fields);for(const l in a){for(const r in a[l].table)a[l].table[r]=a[l].table[r].value;for(const r in a[l].form)a[l].form[r]=a[l].form[r].value}Oe({table:e.table,fields:a}).then(()=>{S.go(0)}).finally(()=>{e.loading.generate=!1,M()})},_e=()=>{let a="";if(e.fields.find(r=>{if(!Qe(r.name))return a=o("crud.crud.Field name is invalid It starts with a letter or underscore and cannot contain any character other than letters, digits, or underscores",{field:r.name}),!0}),e.fields.findIndex(r=>r.primaryKey)===-1&&(a=o("crud.crud.Please design the primary key field!")),e.table.name||(a=o("crud.crud.Please enter the data table name!")),a){Y({type:"error",message:a});return}e.loading.generate=!0,Je({table:e.table.name,controllerFile:e.table.controllerFile}).then(()=>{ae()}).catch(r=>{e.loading.generate=!1,r.code==-1?(e.confirmGenerate.show=!0,e.confirmGenerate.table=r.data.table,e.confirmGenerate.controller=r.data.controller):Y({type:"error",message:r.msg})})},Ce=()=>{if(!e.table.name&&!e.table.comment&&!e.fields.length)return he("start");Ge.confirm(o("crud.crud.It is irreversible to give up the design Are you sure you want to give up?"),o("Reminder"),{confirmButtonText:o("crud.crud.give up"),cancelButtonText:o("Cancel"),type:"warning"}).then(()=>{he("start")}).catch(()=>{})},G=a=>{const l=A(ve[a.designType]);for(const r in a.form)l.form[r]&&(l.form[r].value=a.form[r]),r=="image-multi"&&a.form[r]&&(l.table.render=He("render","images"));for(const r in a.table)l.table[r]&&(l.table[r].value=a.table[r]);return a.form=l.form,a.table=l.table,a},Le=a=>{if(["enum","set"].includes(e.fields[e.activateField].type)){if(!a){e.fields[e.activateField].dataType=`${e.fields[e.activateField].type}()`;return}a=a.replaceAll("：",":"),a=a.replaceAll("，",",");let l=a.split(":");l[1]&&(l=l[1].split(","),l=l.map(r=>{if(!r)return"";let c=r.split("=");return c[0]&&c[1]?`'${c[0]}'`:""}).filter(r=>r!=""),e.fields[e.activateField].dataType=`${e.fields[e.activateField].type}(${l.join(",")})`)}},De=()=>{if(["db","sql","log"].includes(L.type)){if(e.loading.init=!0,L.type=="log"){We(parseInt(L.startData.logId)).then(a=>{e.table=a.data.table;const l=a.data.fields;for(const r in l){const c=G(A(l[r]));e.fields.push(c)}}).finally(()=>{e.loading.init=!1});return}Ye(L.type,L.startData.db,L.startData.sql).then(a=>{let l=[];for(const r in a.data.columns){const c=G(a.data.columns[r]);["id","update_time","create_time","updatetime","createtime"].includes(c.name)||e.table.formFields.push(c.name),["textarea","file","files","editor","password","array"].includes(c.designType)||e.table.columnFields.push(c.name),c.designType=="pk"&&(e.table.defaultSortField=c.name,e.table.quickSearchField.push(c.name)),c.designType=="weigh"&&(e.table.defaultSortField=c.name),l.push(c)}e.fields=l,e.table.comment=a.data.comment,L.type=="db"&&L.startData.db&&(e.table.name=L.startData.db,oe(L.startData.db))}).finally(()=>{e.loading.init=!1})}};Ke(()=>{De();const a=ge.create(V.value,{group:"design-field",animation:200,filter:".design-field-empty",onAdd:l=>{var F,w;const r=(w=(F=l.originalEvent)==null?void 0:F.dataTransfer)==null?void 0:w.getData("name"),c=$[r];if(c&&c[l.oldIndex]){const g=G(A(c[l.oldIndex]));if(g.primaryKey==!0){if(e.fields.find(J=>J.primaryKey))return Y({type:"error",message:o("crud.crud.There can only be one primary key field")}),l.item.remove();e.table.defaultSortField=g.name,e.table.quickSearchField.push(g.name)}g.designType=="weigh"&&(e.table.defaultSortField=g.name),Q(e.fields,"name",g.name)&&(g.name=g.name+R,R++),e.fields.splice(l.newIndex,0,g),["remoteSelect","remoteSelects"].includes(g.designType)&&te(l.newIndex,!0),g.formBuildExclude||e.table.formFields.push(g.name),g.tableBuildExclude||e.table.columnFields.push(g.name)}l.item.remove(),me(()=>{a.sort(Ve(e.fields.length).map(g=>g.toString()))})},onEnd:l=>{const r=e.fields[l.oldIndex];e.fields.splice(l.oldIndex,1),e.fields.splice(l.newIndex,0,r),me(()=>{a.sort(Ve(e.fields.length).map(c=>c.toString()))})}});T.value.forEach((l,r)=>{ge.create(l,{sort:!1,group:{name:"design-field",pull:"clone",put:!1},animation:200,setData:c=>{c.setData("name",Object.keys($)[r])}})})});const oe=a=>{a&&X(a).then(l=>{e.table.modelFile=l.data.modelFile,e.table.controllerFile=l.data.controllerFile,e.table.validateFile=l.data.validateFile,e.table.webViewsDir=l.data.webViewsDir})},Te=a=>{a&&(O(),e.remoteSelectPre.form.table=a,e.loading.remoteSelect=!0,be(a).then(l=>{e.remoteSelectPre.form.pk=l.data.pk;const r=["name","title","username","nickname"];for(const F in l.data.fieldList)if(r.includes(F)){e.remoteSelectPre.form.label=F,e.remoteSelectPre.form.joinField.push(F);break}const c={};for(const F in l.data.fieldList)c[F]=(F?F+" - ":"")+l.data.fieldList[F];e.remoteSelectPre.fieldList=c}).finally(()=>{e.loading.remoteSelect=!1}),X(a).then(l=>{e.remoteSelectPre.modelFileList=l.data.modelFileList,e.remoteSelectPre.controllerFileList=l.data.controllerFileList,Object.keys(l.data.modelFileList).includes(l.data.modelFile)&&(e.remoteSelectPre.form.modelFile=l.data.modelFile),Object.keys(l.data.controllerFileList).includes(l.data.controllerFile)&&(e.remoteSelectPre.form.controllerFile=l.data.controllerFile)}))},ie=()=>{const a=()=>{e.fields[e.remoteSelectPre.index].form["remote-table"].value=e.remoteSelectPre.form.table,e.fields[e.remoteSelectPre.index].form["remote-pk"].value=e.remoteSelectPre.form.pk,e.fields[e.remoteSelectPre.index].form["remote-field"].value=e.remoteSelectPre.form.label,e.fields[e.remoteSelectPre.index].form["remote-controller"].value=e.remoteSelectPre.form.controllerFile,e.fields[e.remoteSelectPre.index].form["remote-model"].value=e.remoteSelectPre.form.modelFile,e.fields[e.remoteSelectPre.index].form["relation-fields"].value=e.remoteSelectPre.form.joinField.join(","),e.remoteSelectPre.index=-1,e.remoteSelectPre.show=!1,O()};N.value&&N.value.validate(l=>{l&&a()})},re=()=>{e.remoteSelectPre.show=!1,O(),e.remoteSelectPre.index!==-1&&e.remoteSelectPre.hideDelField&&le(e.remoteSelectPre.index)},O=()=>{for(const a in e.remoteSelectPre.form)a=="joinField"?e.remoteSelectPre.form[a]=[]:e.remoteSelectPre.form[a]=""},Ue=ue({table:[j({name:"required",title:o("crud.crud.remote-table")})],pk:[j({name:"required",title:o("crud.crud.Drop down value field")})],label:[j({name:"required",title:o("crud.crud.Drop down label field")})],joinField:[j({name:"required",title:o("crud.crud.Fields displayed in the table")})],controllerFile:[j({name:"required",title:o("crud.crud.Controller position")})]});return(a,l)=>{const r=P("el-button"),c=P("el-row"),F=P("el-option"),w=P("el-select"),g=P("el-form-item"),q=P("Icon"),B=P("el-collapse-item"),J=P("el-collapse"),H=P("el-col"),E=P("el-divider"),de=P("el-form"),ne=P("el-dialog"),se=P("el-alert"),x=ye("blur"),W=ye("loading");return n(),p("div",il,[m("div",rl,[d(c,{class:"header-box"},{default:u(()=>[m("div",dl,[m("div",nl,[d(f,{class:"mr-20 table-name-item",label:i(o)("crud.log.table_name"),modelValue:e.table.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.table.name=t),type:"string",placeholder:i(o)("crud.crud.Name of the data table"),"input-attr":{onChange:oe}},null,8,["label","modelValue","placeholder","input-attr"]),d(f,{class:"table-comment-item",label:i(o)("crud.crud.Data Table Notes"),modelValue:e.table.comment,"onUpdate:modelValue":l[1]||(l[1]=t=>e.table.comment=t),type:"string",placeholder:i(o)("crud.crud.For example: `user table` will be generated into `user management`")},null,8,["label","modelValue","placeholder"])]),m("div",sl,[D((n(),b(r,{type:"primary",loading:e.loading.generate,onClick:_e},{default:u(()=>[C(v(i(o)("crud.crud.Generate CRUD code")),1)]),_:1},8,["loading"])),[[x]]),D((n(),b(r,{onClick:Ce,type:"danger"},{default:u(()=>[C(v(i(o)("crud.crud.give up")),1)]),_:1})),[[x]])])])]),_:1}),d($e,{name:e.showHeaderSeniorConfig?"el-zoom-in-top":"el-zoom-in-bottom"},{default:u(()=>[e.showHeaderSeniorConfig?(n(),p("div",cl,[m("div",ul,[d(g,{"label-width":140,label:i(o)("crud.crud.Table Quick Search Fields")},{default:u(()=>[d(w,{clearable:!0,multiple:!0,class:"w100",modelValue:e.table.quickSearchField,"onUpdate:modelValue":l[2]||(l[2]=t=>e.table.quickSearchField=t),placement:"bottom"},{default:u(()=>[(n(!0),p(h,null,k(e.fields,(t,s)=>(n(),b(F,{key:s,label:t.name+(t.title?"-"+t.title:""),value:t.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),m("div",ml,[d(g,{"label-width":140,class:"default-sort-field",label:i(o)("crud.crud.Table Default Sort Fields")},{default:u(()=>[d(w,{clearable:!0,modelValue:e.table.defaultSortField,"onUpdate:modelValue":l[3]||(l[3]=t=>e.table.defaultSortField=t),placement:"bottom"},{default:u(()=>[(n(!0),p(h,null,k(e.fields,(t,s)=>(n(),b(F,{key:s,label:t.name+(t.title?"-"+t.title:""),value:t.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),d(f,{class:"default-sort-field-type",label:i(o)("crud.crud.sort order"),modelValue:e.table.defaultSortType,"onUpdate:modelValue":l[4]||(l[4]=t=>e.table.defaultSortType=t),type:"select",data:{content:{desc:i(o)("crud.crud.sort order desc"),asc:i(o)("crud.crud.sort order asc")}}},null,8,["label","modelValue","data"])]),d(g,{"label-width":140,label:i(o)("crud.crud.Fields as Table Columns")},{default:u(()=>[d(w,{clearable:!0,multiple:!0,class:"w100",modelValue:e.table.columnFields,"onUpdate:modelValue":l[5]||(l[5]=t=>e.table.columnFields=t),placement:"bottom"},{default:u(()=>[(n(!0),p(h,null,k(e.fields,(t,s)=>(n(),b(F,{key:s,label:t.name+(t.title?"-"+t.title:""),value:t.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),d(g,{"label-width":140,label:i(o)("crud.crud.Fields as form items")},{default:u(()=>[d(w,{clearable:!0,multiple:!0,class:"w100",modelValue:e.table.formFields,"onUpdate:modelValue":l[6]||(l[6]=t=>e.table.formFields=t),placement:"bottom"},{default:u(()=>[(n(!0),p(h,null,k(e.fields,(t,s)=>(n(),b(F,{key:s,label:t.name+(t.title?"-"+t.title:""),value:t.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),d(f,{label:i(o)("crud.crud.Generated Controller Location"),modelValue:e.table.controllerFile,"onUpdate:modelValue":l[7]||(l[7]=t=>e.table.controllerFile=t),type:"string",attr:{"label-width":140}},null,8,["label","modelValue"]),d(f,{label:i(o)("crud.crud.Generated Data Model Location"),modelValue:e.table.modelFile,"onUpdate:modelValue":l[8]||(l[8]=t=>e.table.modelFile=t),type:"string",attr:{"label-width":140}},null,8,["label","modelValue"]),d(f,{label:i(o)("crud.crud.Generated Validator Location"),modelValue:e.table.validateFile,"onUpdate:modelValue":l[9]||(l[9]=t=>e.table.validateFile=t),type:"string",attr:{"label-width":140}},null,8,["label","modelValue"]),d(f,{label:i(o)("crud.crud.WEB end view directory"),modelValue:e.table.webViewsDir,"onUpdate:modelValue":l[10]||(l[10]=t=>e.table.webViewsDir=t),type:"string",attr:{"label-width":140}},null,8,["label","modelValue"])])])):U("",!0)]),_:1},8,["name"]),m("div",{onClick:l[11]||(l[11]=t=>e.showHeaderSeniorConfig=!e.showHeaderSeniorConfig),class:"header-senior-config"},[m("span",null,v(i(o)("crud.crud.Advanced Configuration")),1),d(q,{class:"senior-config-arrow-icon",size:"14",color:"var(--el-color-info)",name:e.showHeaderSeniorConfig?"el-icon-ArrowUp":"el-icon-ArrowDown"},null,8,["name"])])]),D((n(),b(c,{class:"fields-box",gutter:20},{default:u(()=>[d(H,{xs:24,span:6},{default:u(()=>[d(J,{class:"field-collapse",modelValue:e.fieldCollapseName,"onUpdate:modelValue":l[12]||(l[12]=t=>e.fieldCollapseName=t)},{default:u(()=>[d(B,{title:i(o)("crud.crud.Common Fields"),name:"common"},{default:u(()=>[m("div",{class:"field-box",ref:i(T).set},[(n(!0),p(h,null,k(i($).common,(t,s)=>(n(),p("div",{key:s,class:"field-item"},[m("span",null,v(t.title),1)]))),128))],512)]),_:1},8,["title"]),d(B,{title:i(o)("crud.crud.Base Fields"),name:"base"},{default:u(()=>[m("div",{class:"field-box",ref:i(T).set},[(n(!0),p(h,null,k(i($).base,(t,s)=>(n(),p("div",{key:s,class:"field-item"},[m("span",null,v(t.title),1)]))),128))],512)]),_:1},8,["title"]),d(B,{title:i(o)("crud.crud.Advanced Fields"),name:"senior"},{default:u(()=>[m("div",{class:"field-box",ref:i(T).set},[(n(!0),p(h,null,k(i($).senior,(t,s)=>(n(),p("div",{key:s,class:"field-item"},[m("span",null,v(t.title),1)]))),128))],512)]),_:1},8,["title"])]),_:1},8,["modelValue"])]),_:1}),d(H,{xs:24,span:12},{default:u(()=>[m("div",{ref_key:"designWindowRef",ref:V,class:fe(["design-window ba-scroll-style",e.fields.length?"":"design-window-empty"])},[(n(!0),p(h,null,k(e.fields,(t,s)=>(n(),p("div",{key:s,class:fe([s===e.activateField?"activate":"","design-field-box"]),onClick:_=>we(s),"data-id":s},[m("div",pl,[m("span",null,v(i(o)("crud.crud.Field Name"))+"：",1),d(Fe,{onPointerdown:l[13]||(l[13]=z(()=>{},["stop"])),class:"design-field-name-input",modelValue:t.name,"onUpdate:modelValue":_=>t.name=_,type:"string",attr:{size:"small",onChange:ee}},null,8,["modelValue","onUpdate:modelValue","attr"])]),m("div",bl,[m("span",null,v(i(o)("crud.crud.field comment"))+"：",1),d(Fe,{onPointerdown:l[14]||(l[14]=z(()=>{},["stop"])),class:"design-field-name-comment",modelValue:t.comment,"onUpdate:modelValue":_=>t.comment=_,type:"string",attr:{size:"small"}},null,8,["modelValue","onUpdate:modelValue"])]),m("div",yl,[["remoteSelect","remoteSelects"].includes(t.designType)?D((n(),b(r,{key:0,onClick:z(_=>ke(s,t),["stop"]),type:"primary",size:"small",circle:""},{default:u(()=>[d(q,{color:"var(--el-color-white)",size:"15",name:"fa fa-pencil icon"})]),_:2},1032,["onClick"])),[[x]]):U("",!0),D((n(),b(r,{onClick:z(_=>le(s),["stop"]),type:"danger",size:"small",circle:""},{default:u(()=>[d(q,{color:"var(--el-color-white)",size:"15",name:"fa fa-trash"})]),_:2},1032,["onClick"])),[[x]])])],10,fl))),128)),e.fields.length?U("",!0):(n(),p("div",gl,v(i(o)("crud.crud.Drag the left element here to start designing CRUD")),1))],2)]),_:1}),d(H,{xs:24,span:6},{default:u(()=>[m("div",Fl,[e.activateField===-1?(n(),p("div",vl,v(i(o)("crud.crud.Please select a field from the left first")),1)):(n(),p("div",{key:"activate-field-"+e.activateField},[d(de,{"label-position":"top"},{default:u(()=>[d(E,{"content-position":"left"},{default:u(()=>[C(v(i(o)("crud.crud.Common")),1)]),_:1}),d(g,{label:i(o)("crud.crud.generate")},{default:u(()=>[d(w,{onChange:Pe,class:"w100",modelValue:e.fields[e.activateField].designType,"onUpdate:modelValue":l[15]||(l[15]=t=>e.fields[e.activateField].designType=t),placement:"bottom"},{default:u(()=>[(n(!0),p(h,null,k(i(ve),(t,s)=>(n(),b(F,{key:s,label:t.name,value:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),d(f,{label:i(o)("crud.crud.Field comments (CRUD dictionary)"),type:"textarea","input-attr":{rows:2,onChange:Le},placeholder:i(o)("crud.crud.The field comment will be used as the CRUD dictionary, and will be identified as the field title before the colon, and as the data dictionary after the colon"),modelValue:e.fields[e.activateField].comment,"onUpdate:modelValue":l[16]||(l[16]=t=>e.fields[e.activateField].comment=t)},null,8,["label","input-attr","placeholder","modelValue"]),d(E,{"content-position":"left"},{default:u(()=>[C(v(i(o)("crud.crud.Field Properties")),1)]),_:1}),d(f,{label:i(o)("crud.crud.Field Name"),type:"string",modelValue:e.fields[e.activateField].name,"onUpdate:modelValue":l[17]||(l[17]=t=>e.fields[e.activateField].name=t),"input-attr":{onChange:ee}},null,8,["label","modelValue","input-attr"]),e.fields[e.activateField].dataType?(n(),b(f,{key:0,label:i(o)("crud.crud.Field Type"),type:"textarea",modelValue:e.fields[e.activateField].dataType,"onUpdate:modelValue":l[18]||(l[18]=t=>e.fields[e.activateField].dataType=t)},null,8,["label","modelValue"])):(n(),p(h,{key:1},[d(f,{label:i(o)("crud.crud.Field Type"),type:"string",modelValue:e.fields[e.activateField].type,"onUpdate:modelValue":l[19]||(l[19]=t=>e.fields[e.activateField].type=t)},null,8,["label","modelValue"]),m("div",hl,[d(f,{label:i(o)("crud.crud.length"),type:"number",modelValue:e.fields[e.activateField].length,"onUpdate:modelValue":l[20]||(l[20]=t=>e.fields[e.activateField].length=t),modelModifiers:{number:!0}},null,8,["label","modelValue"]),d(f,{label:i(o)("crud.crud.decimal point"),type:"number",modelValue:e.fields[e.activateField].precision,"onUpdate:modelValue":l[21]||(l[21]=t=>e.fields[e.activateField].precision=t),modelModifiers:{number:!0}},null,8,["label","modelValue"])])],64)),d(f,{label:i(o)("crud.crud.Field Defaults"),placeholder:i(o)("crud.crud.You can directly enter null, 0, empty string"),type:"string",modelValue:e.fields[e.activateField].default,"onUpdate:modelValue":l[22]||(l[22]=t=>e.fields[e.activateField].default=t)},null,8,["label","placeholder","modelValue"]),m("div",Sl,[d(f,{class:"form-item-position-right",label:i(o)("crud.state.Primary key"),type:"switch",modelValue:e.fields[e.activateField].primaryKey,"onUpdate:modelValue":l[23]||(l[23]=t=>e.fields[e.activateField].primaryKey=t)},null,8,["label","modelValue"]),d(f,{class:"form-item-position-right",label:i(o)("crud.crud.Auto increment"),type:"switch",modelValue:e.fields[e.activateField].autoIncrement,"onUpdate:modelValue":l[24]||(l[24]=t=>e.fields[e.activateField].autoIncrement=t)},null,8,["label","modelValue"])]),m("div",Vl,[d(f,{class:"form-item-position-right",label:i(o)("crud.crud.Unsigned"),type:"switch",modelValue:e.fields[e.activateField].unsigned,"onUpdate:modelValue":l[25]||(l[25]=t=>e.fields[e.activateField].unsigned=t)},null,8,["label","modelValue"]),d(f,{class:"form-item-position-right",label:i(o)("crud.crud.Allow NULL"),type:"switch",modelValue:e.fields[e.activateField].null,"onUpdate:modelValue":l[26]||(l[26]=t=>e.fields[e.activateField].null=t)},null,8,["label","modelValue"])]),i(K)(e.fields[e.activateField].table)?U("",!0):(n(),p(h,{key:2},[d(E,{"content-position":"left"},{default:u(()=>[C(v(i(o)("crud.crud.Field Table Properties")),1)]),_:1}),(n(!0),p(h,null,k(e.fields[e.activateField].table,(t,s)=>(n(),b(f,{key:s,label:a.$t("crud.crud."+s),type:t.type,modelValue:e.fields[e.activateField].table[s].value,"onUpdate:modelValue":_=>e.fields[e.activateField].table[s].value=_,placeholder:e.fields[e.activateField].table[s].placeholder??"",data:{content:e.fields[e.activateField].table[s].options??{}},"input-attr":e.fields[e.activateField].table[s].attr??{}},null,8,["label","type","modelValue","onUpdate:modelValue","placeholder","data","input-attr"]))),128))],64)),i(K)(e.fields[e.activateField].form)?U("",!0):(n(),p(h,{key:3},[d(E,{"content-position":"left"},{default:u(()=>[C(v(i(o)("crud.crud.Field Form Properties")),1)]),_:1}),(n(!0),p(h,null,k(e.fields[e.activateField].form,(t,s)=>(n(),b(f,{key:s,label:a.$t("crud.crud."+s),type:t.type,modelValue:e.fields[e.activateField].form[s].value,"onUpdate:modelValue":_=>e.fields[e.activateField].form[s].value=_,placeholder:e.fields[e.activateField].form[s].placeholder??"",data:{content:e.fields[e.activateField].form[s].options??{}},"input-attr":e.fields[e.activateField].form[s].attr??{}},null,8,["label","type","modelValue","onUpdate:modelValue","placeholder","data","input-attr"]))),128))],64))]),_:1})]))])]),_:1})]),_:1})),[[W,e.loading.init]]),d(ne,{onClose:re,class:"ba-operate-dialog","model-value":e.remoteSelectPre.show,title:i(o)("crud.crud.Remote drop-down association information"),"close-on-click-modal":!1,onKeyup:je(ie,["enter"])},{footer:u(()=>[m("div",{style:pe("width: calc(100% - 88px)")},[d(r,{onClick:re},{default:u(()=>[C(v(a.$t("Cancel")),1)]),_:1}),D((n(),b(r,{onClick:ie,type:"primary"},{default:u(()=>[C(v(a.$t("Save")),1)]),_:1})),[[x]])],4)]),default:u(()=>[m("div",{class:"ba-operate-form",style:pe("width: calc(100% - 80px)")},[D((n(),b(de,{ref_key:"formRef",ref:N,model:e.remoteSelectPre.form,rules:Ue,"label-position":"right","label-width":"160px","destroy-on-close":!0},{default:u(()=>[(n(),b(f,{prop:"table",type:"select",label:i(o)("crud.crud.Associated Data Table"),modelValue:e.remoteSelectPre.form.table,"onUpdate:modelValue":l[27]||(l[27]=t=>e.remoteSelectPre.form.table=t),key:JSON.stringify(e.remoteSelectPre.dbList),data:{content:e.remoteSelectPre.dbList},"input-attr":{onChange:Te}},null,8,["label","modelValue","data","input-attr"])),D((n(),p("div",null,[(n(),b(f,{prop:"pk",type:"select",label:i(o)("crud.crud.Drop down value field"),modelValue:e.remoteSelectPre.form.pk,"onUpdate:modelValue":l[28]||(l[28]=t=>e.remoteSelectPre.form.pk=t),placeholder:i(o)("crud.crud.Please select the value field of the select component"),key:"select-value"+JSON.stringify(e.remoteSelectPre.fieldList),data:{content:e.remoteSelectPre.fieldList}},null,8,["label","modelValue","placeholder","data"])),(n(),b(f,{prop:"label",type:"select",label:i(o)("crud.crud.Drop down label field"),modelValue:e.remoteSelectPre.form.label,"onUpdate:modelValue":l[29]||(l[29]=t=>e.remoteSelectPre.form.label=t),placeholder:i(o)("crud.crud.Please select the label field of the select component"),key:"select-label"+JSON.stringify(e.remoteSelectPre.fieldList),data:{content:e.remoteSelectPre.fieldList}},null,8,["label","modelValue","placeholder","data"])),(n(),b(f,{prop:"joinField",type:"selects",label:i(o)("crud.crud.Fields displayed in the table"),modelValue:e.remoteSelectPre.form.joinField,"onUpdate:modelValue":l[30]||(l[30]=t=>e.remoteSelectPre.form.joinField=t),placeholder:i(o)("crud.crud.Please select the fields displayed in the table"),key:"join-field"+JSON.stringify(e.remoteSelectPre.fieldList),data:{content:e.remoteSelectPre.fieldList}},null,8,["label","modelValue","placeholder","data"])),(n(),b(f,{prop:"controllerFile",type:"select",label:i(o)("crud.crud.Controller position"),modelValue:e.remoteSelectPre.form.controllerFile,"onUpdate:modelValue":l[31]||(l[31]=t=>e.remoteSelectPre.form.controllerFile=t),placeholder:i(o)("crud.crud.Please select the controller of the data table"),key:"controller-file"+JSON.stringify(e.remoteSelectPre.controllerFileList),data:{content:e.remoteSelectPre.controllerFileList},attr:{"block-help":i(o)("crud.crud.The remote pull-down will request the corresponding controller to obtain data, so it is recommended that you create the CRUD of the associated table")}},null,8,["label","modelValue","placeholder","data","attr"])),(n(),b(f,{type:"select",label:i(o)("crud.crud.Data Model Location"),modelValue:e.remoteSelectPre.form.modelFile,"onUpdate:modelValue":l[32]||(l[32]=t=>e.remoteSelectPre.form.modelFile=t),placeholder:i(o)("crud.crud.Please select the data model location of the data table"),key:"model-file"+JSON.stringify(e.remoteSelectPre.modelFileList),data:{content:e.remoteSelectPre.modelFileList},attr:{"block-help":i(o)("crud.crud.If it is left blank, the model of the associated table will be generated automatically If the table already has a model, it is recommended to select it to avoid repeated generation")}},null,8,["label","modelValue","placeholder","data","attr"]))])),[[W,e.loading.remoteSelect]])]),_:1},8,["model","rules"])),[[W,e.remoteSelectPre.loading]])],4)]),_:1},8,["model-value","title","onKeyup"]),d(ne,{onClose:M,class:"ba-operate-dialog confirm-generate-dialog","model-value":e.confirmGenerate.show,title:i(o)("crud.crud.Confirm CRUD code generation")},{footer:u(()=>[m("div",kl,[d(r,{onClick:M},{default:u(()=>[C(v(a.$t("Cancel")),1)]),_:1}),D((n(),b(r,{loading:e.loading.generate,onClick:ae,type:"primary"},{default:u(()=>[C(v(i(o)("crud.crud.Continue building")),1)]),_:1},8,["loading"])),[[x]])])]),default:u(()=>[m("div",wl,[e.confirmGenerate.controller?(n(),b(se,{key:0,title:i(o)("crud.crud.The controller already exists Continuing to generate will automatically overwrite the existing code!"),center:"",type:"error"},null,8,["title"])):U("",!0),Pl,e.confirmGenerate.table?(n(),b(se,{key:1,title:i(o)("crud.crud.The data table already exists Continuing to generate will automatically delete the original table and create a new one!"),center:"",type:"error"},null,8,["title"])):U("",!0)])]),_:1},8,["model-value","title"])])}}});const Nl=ze(_l,[["__scopeId","data-v-9df8a32c"]]);export{Nl as default};
