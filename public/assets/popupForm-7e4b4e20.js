import{h as T,L as h,r as z,B as E,p as u,C as n,D as s,N as w,l as M,U as f,M as b,k as e,o as x,q as a,m as S,$ as k,S as U,a6 as D,T as Y,al as j,t as i,R as c}from"./vue-8b21a996.js";import{l as K,r as R,_ as W}from"./index-36779712.js";import{b as V,r as G}from"./validate-fd871b41.js";import{F as g}from"./index-ebfda3ce.js";import{u as H}from"./controllerUrls-941681c3.js";import"./index-b2d35f6a.js";import"./index-0d1dfc75.js";const J={class:"title"},O=T({__name:"popupForm",props:{product:null},setup(F){const y=h(),l=j("baTable"),{t:r}=K(),P=z({username:[V({name:"required",title:r("user.user.User name")}),V({name:"account"})],nickname:[V({name:"required",title:r("user.user.nickname")})],email:[V({name:"email",title:r("user.user.email")})],mobile:[V({name:"mobile"})],password:[{validator:(p,o,m)=>{if(l.form.operate=="add"){if(!o)return m(new Error(r("Please input field",{field:r("user.user.password")})))}else if(!o)return m();return G(o)?m():m(new Error(r("validate.Please enter the correct password")))},trigger:"blur"}]}),C=p=>{l.toggleForm(),R.push({name:p=="money"?"user/moneyLog":"user/scoreLog",query:{user_id:l.form.items.id}})};return E(()=>l.form.operate,p=>{P.password[0].required=p=="add"}),(p,o)=>{const m=i("el-input"),d=i("el-form-item"),v=i("el-date-picker"),_=i("el-button"),$=i("el-form"),q=i("el-scrollbar"),A=i("el-dialog"),B=c("drag"),I=c("zoom"),L=c("loading"),N=c("blur");return u(),n(A,{class:"ba-operate-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":!!e(l).form.operate,onClose:e(l).toggleForm},{header:s(()=>[w((u(),M("div",J,[f(b(e(l).form.operate?e(r)(e(l).form.operate):""),1)])),[[B,[".ba-operate-dialog",".el-dialog__header"]],[I,".ba-operate-dialog"]])]),footer:s(()=>[x("div",{style:S("width: calc(100% - "+e(l).form.labelWidth/1.8+"px)")},[a(_,{onClick:o[22]||(o[22]=t=>e(l).toggleForm(""))},{default:s(()=>[f(b(e(r)("Cancel")),1)]),_:1}),w((u(),n(_,{loading:e(l).form.submitLoading,onClick:o[23]||(o[23]=t=>e(l).onSubmit(y.value)),type:"primary"},{default:s(()=>[f(b(e(l).form.operateIds&&e(l).form.operateIds.length>1?e(r)("Save and edit next item"):e(r)("Save")),1)]),_:1},8,["loading"])),[[N]])],4)]),default:s(()=>[w((u(),n(q,{class:"ba-table-form-scrollbar"},{default:s(()=>[x("div",{class:Y(["ba-operate-form","ba-"+e(l).form.operate+"-form"]),style:S("width: calc(100% - "+e(l).form.labelWidth/2+"px)")},[e(l).form.loading?U("",!0):(u(),n($,{key:0,ref_key:"formRef",ref:y,onKeyup:o[21]||(o[21]=k(t=>e(l).onSubmit(y.value),["enter"])),model:e(l).form.items,"label-position":"right","label-width":e(l).form.labelWidth+"px",rules:P},{default:s(()=>[a(d,{prop:"username",label:e(r)("user.user.User name")},{default:s(()=>[a(m,{modelValue:e(l).form.items.username,"onUpdate:modelValue":o[0]||(o[0]=t=>e(l).form.items.username=t),type:"string",placeholder:e(r)("Please input field",{field:e(r)("user.user.User name")+"("+e(r)("user.user.Login account")+")"})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,{prop:"nickname",label:e(r)("user.user.nickname")},{default:s(()=>[a(m,{modelValue:e(l).form.items.nickname,"onUpdate:modelValue":o[1]||(o[1]=t=>e(l).form.items.nickname=t),type:"string",placeholder:e(r)("Please input field",{field:e(r)("user.user.nickname")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(g,{type:"remoteSelect",label:e(r)("user.user.grouping"),modelValue:e(l).form.items.group_id,"onUpdate:modelValue":o[2]||(o[2]=t=>e(l).form.items.group_id=t),placeholder:e(r)("user.user.grouping"),"input-attr":{params:{isTree:!0,search:[{field:"status",val:"1",operator:"="}]},field:"name","remote-url":e(H)+"index"}},null,8,["label","modelValue","placeholder","input-attr"]),a(g,{label:e(r)("user.user.head portrait"),type:"image",modelValue:e(l).form.items.avatar,"onUpdate:modelValue":o[3]||(o[3]=t=>e(l).form.items.avatar=t)},null,8,["label","modelValue"]),a(g,{label:"会员套餐",type:"select",modelValue:e(l).form.items.product_id,"onUpdate:modelValue":o[4]||(o[4]=t=>e(l).form.items.product_id=t),data:{content:F.product}},null,8,["modelValue","data"]),a(d,{prop:"num",label:"剩余聊天次数"},{default:s(()=>[a(m,{modelValue:e(l).form.items.num,"onUpdate:modelValue":o[5]||(o[5]=t=>e(l).form.items.num=t),type:"string",placeholder:e(r)("Please input field",{field:"剩余聊天次数"})},null,8,["modelValue","placeholder"])]),_:1}),a(d,{prop:"start_time",label:"会员起始时间"},{default:s(()=>[a(v,{class:"w100",modelValue:e(l).form.items.start_time,"onUpdate:modelValue":o[6]||(o[6]=t=>e(l).form.items.start_time=t),render:"datetime",placeholder:e(r)("Please select field",{field:"会员起始时间"})},null,8,["modelValue","placeholder"])]),_:1}),a(d,{prop:"end_time",label:"会员结束时间"},{default:s(()=>[a(v,{class:"w100",modelValue:e(l).form.items.end_time,"onUpdate:modelValue":o[7]||(o[7]=t=>e(l).form.items.end_time=t),render:"datetime",placeholder:e(r)("Please select field",{field:"会员结束时间"})},null,8,["modelValue","placeholder"])]),_:1}),a(d,{prop:"email",label:e(r)("user.user.email")},{default:s(()=>[a(m,{modelValue:e(l).form.items.email,"onUpdate:modelValue":o[8]||(o[8]=t=>e(l).form.items.email=t),type:"string",placeholder:e(r)("Please input field",{field:e(r)("user.user.email")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,{prop:"mobile",label:e(r)("user.user.mobile")},{default:s(()=>[a(m,{modelValue:e(l).form.items.mobile,"onUpdate:modelValue":o[9]||(o[9]=t=>e(l).form.items.mobile=t),type:"string",placeholder:e(r)("Please input field",{field:e(r)("user.user.mobile")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(g,{label:e(r)("user.user.Gender"),modelValue:e(l).form.items.gender,"onUpdate:modelValue":o[10]||(o[10]=t=>e(l).form.items.gender=t),type:"radio",data:{content:{0:e(r)("unknown"),1:e(r)("user.user.male"),2:e(r)("user.user.female")},childrenAttr:{border:!0}}},null,8,["label","modelValue","data"]),a(d,{label:e(r)("user.user.birthday")},{default:s(()=>[a(v,{class:"w100","value-format":"YYYY-MM-DD",modelValue:e(l).form.items.birthday,"onUpdate:modelValue":o[11]||(o[11]=t=>e(l).form.items.birthday=t),type:"date",placeholder:e(r)("Please select field",{field:e(r)("user.user.birthday")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(l).form.operate=="edit"?(u(),n(d,{key:0,label:e(r)("user.user.balance")},{default:s(()=>[a(m,{modelValue:e(l).form.items.money,"onUpdate:modelValue":o[13]||(o[13]=t=>e(l).form.items.money=t),readonly:""},{append:s(()=>[a(_,{onClick:o[12]||(o[12]=t=>C("money"))},{default:s(()=>[f(b(e(r)("user.user.Adjustment balance")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):U("",!0),e(l).form.operate=="edit"?(u(),n(d,{key:1,label:e(r)("user.user.integral")},{default:s(()=>[a(m,{modelValue:e(l).form.items.score,"onUpdate:modelValue":o[15]||(o[15]=t=>e(l).form.items.score=t),readonly:""},{append:s(()=>[a(_,{onClick:o[14]||(o[14]=t=>C("score"))},{default:s(()=>[f(b(e(r)("user.user.Adjust integral")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):U("",!0),a(d,{prop:"password",label:e(r)("user.user.password")},{default:s(()=>[a(m,{modelValue:e(l).form.items.password,"onUpdate:modelValue":o[16]||(o[16]=t=>e(l).form.items.password=t),type:"password",placeholder:e(l).form.operate=="add"?e(r)("Please input field",{field:e(r)("user.user.password")}):e(r)("user.user.Please leave blank if not modified")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(d,{prop:"motto",label:e(r)("user.user.Personal signature")},{default:s(()=>[a(m,{onKeyup:[o[17]||(o[17]=k(D(()=>{},["stop"]),["enter"])),o[18]||(o[18]=k(D(t=>e(l).onSubmit(y.value),["ctrl"]),["enter"]))],modelValue:e(l).form.items.motto,"onUpdate:modelValue":o[19]||(o[19]=t=>e(l).form.items.motto=t),type:"textarea",placeholder:e(r)("Please input field",{field:e(r)("user.user.Personal signature")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(g,{label:e(r)("state"),modelValue:e(l).form.items.status,"onUpdate:modelValue":o[20]||(o[20]=t=>e(l).form.items.status=t),type:"radio",data:{content:{disable:e(r)("Disable"),enable:e(r)("Enable")},childrenAttr:{border:!0}}},null,8,["label","modelValue","data"])]),_:1},8,["model","label-width","rules"]))],6)]),_:1})),[[L,e(l).form.loading]])]),_:1},8,["model-value","onClose"])}}});const te=W(O,[["__scopeId","data-v-ca8e3ce9"]]);export{te as default};
