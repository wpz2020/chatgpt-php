import{d as U,H as z,$ as F,r as I,f as d,Y as n,b as i,z as u,c as N,h as b,i as y,j as e,g as v,a as r,I as V,a0 as B,N as D,A as $,x as M,y as R,R as T,e as p,aC as f}from"./index-9250cf41.js";import{F as m}from"./index-5cf5ba2e.js";import{b as s}from"./validate-d30190a1.js";const W={class:"title"},L=U({__name:"popupForm",setup(j){const c=z(),t=T("baTable"),{t:l}=F(),g=I({num:[s({name:"number",title:l("carmi.num")})],day:[s({name:"number",title:l("carmi.day")})],download:[s({name:"number",title:l("carmi.download")})],create_time:[s({name:"date",title:l("carmi.create_time")})],update_time:[s({name:"number",title:l("carmi.update_time")})]});return(K,a)=>{const k=p("el-form"),h=p("el-scrollbar"),_=p("el-button"),w=p("el-dialog"),x=f("drag"),C=f("zoom"),S=f("loading"),P=f("blur");return d(),n(w,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":["add","edit"].includes(e(t).form.operate),onClose:e(t).toggleForm,width:"50%"},{header:i(()=>[u((d(),N("div",W,[b(y(e(t).form.operate?e(l)(e(t).form.operate):""),1)])),[[x,[".ba-operate-dialog",".el-dialog__header"]],[C,".ba-operate-dialog"]])]),footer:i(()=>[v("div",{style:V("width: calc(100% - "+e(t).form.labelWidth/1.8+"px)")},[r(_,{onClick:a[9]||(a[9]=o=>e(t).toggleForm(""))},{default:i(()=>[b(y(e(l)("Cancel")),1)]),_:1}),u((d(),n(_,{loading:e(t).form.submitLoading,onClick:a[10]||(a[10]=o=>e(t).onSubmit(c.value)),type:"primary"},{default:i(()=>[b(y(e(t).form.operateIds&&e(t).form.operateIds.length>1?e(l)("Save and edit next item"):e(l)("Save")),1)]),_:1},8,["loading"])),[[P]])],4)]),default:i(()=>[u((d(),n(h,{class:"ba-table-form-scrollbar"},{default:i(()=>[v("div",{class:R(["ba-operate-form","ba-"+e(t).form.operate+"-form"]),style:V("width: calc(100% - "+e(t).form.labelWidth/2+"px)")},[e(t).form.loading?M("",!0):(d(),n(k,{key:0,ref_key:"formRef",ref:c,onSubmit:a[7]||(a[7]=B(()=>{},["prevent"])),onKeyup:a[8]||(a[8]=D(o=>e(t).onSubmit(c.value),["enter"])),model:e(t).form.items,"label-position":"right","label-width":e(t).form.labelWidth+"px",rules:g},{default:i(()=>[r(m,{label:e(l)("carmi.key"),type:"string",modelValue:e(t).form.items.key,"onUpdate:modelValue":a[0]||(a[0]=o=>e(t).form.items.key=o),prop:"key",placeholder:e(l)("Please input field",{field:e(l)("carmi.key")})},null,8,["label","modelValue","placeholder"]),r(m,{label:e(l)("carmi.num"),type:"number",prop:"num","input-attr":{step:1},modelValue:e(t).form.items.num,"onUpdate:modelValue":a[1]||(a[1]=o=>e(t).form.items.num=o),modelModifiers:{number:!0},placeholder:e(l)("Please input field",{field:e(l)("carmi.num")})},null,8,["label","modelValue","placeholder"]),r(m,{label:e(l)("carmi.day"),type:"number",prop:"day","input-attr":{step:1},modelValue:e(t).form.items.day,"onUpdate:modelValue":a[2]||(a[2]=o=>e(t).form.items.day=o),modelModifiers:{number:!0},placeholder:e(l)("Please input field",{field:e(l)("carmi.day")})},null,8,["label","modelValue","placeholder"]),r(m,{label:e(l)("carmi.status"),type:"select",modelValue:e(t).form.items.status,"onUpdate:modelValue":a[3]||(a[3]=o=>e(t).form.items.status=o),prop:"status",data:{content:{0:e(l)("carmi.status 0"),1:e(l)("carmi.status 1")}},placeholder:e(l)("Please select field",{field:e(l)("carmi.status")})},null,8,["label","modelValue","data","placeholder"]),r(m,{label:e(l)("carmi.user_id"),type:"remoteSelect",modelValue:e(t).form.items.user_id,"onUpdate:modelValue":a[4]||(a[4]=o=>e(t).form.items.user_id=o),prop:"user_id","input-attr":{pk:"user.id",field:"username","remote-url":"/admin/user.User/index"},placeholder:e(l)("Please select field",{field:e(l)("carmi.user_id")})},null,8,["label","modelValue","input-attr","placeholder"]),r(m,{label:e(l)("carmi.type"),type:"radio",modelValue:e(t).form.items.type,"onUpdate:modelValue":a[5]||(a[5]=o=>e(t).form.items.type=o),prop:"type",data:{content:{custom:e(l)("carmi.type custom"),vip:e(l)("carmi.type vip")}},placeholder:e(l)("Please select field",{field:e(l)("carmi.type")})},null,8,["label","modelValue","data","placeholder"]),u(r(m,{label:"产品套餐",type:"remoteSelect",modelValue:e(t).form.items.product_id,"onUpdate:modelValue":a[6]||(a[6]=o=>e(t).form.items.product_id=o),prop:"product_id","input-attr":{pk:"product.id",field:"name","remote-url":"/admin/Product/index"},placeholder:e(l)("Please select field",{field:e(l)("carmi.product_id")})},null,8,["modelValue","input-attr","placeholder"]),[[$,e(t).form.items.type=="vip"]])]),_:1},8,["model","label-width","rules"]))],6)]),_:1})),[[S,e(t).form.loading]])]),_:1},8,["model-value","onClose"])}}});export{L as _};
