import{s as e,l as K,u as X,g as Z,n as oo}from"./store-55046527.js";import{m as r,c as eo,f as so,a as C,g as to,d as E,b as no,l as lo,h as ao}from"./index-9c7f2a4c.js";import{l as io,T as S,_ as co}from"./index-714877db.js";import ro from"./buy-19e4c4a5.js";import _o from"./pay-a963c016.js";import{h as uo,p as n,l as _,q as m,D as a,N as b,k as o,C as u,o as s,P as w,O as L,S as g,M as t,U as I,i as mo,ae as go,t as c,R as B}from"./vue-8b21a996.js";const fo={class:"goods-info"},po={class:"goods-images"},Io={class:"goods-basic"},ho={class:"goods-basic-title"},vo={class:"goods-tag"},bo={class:"basic-item"},yo={class:"basic-item-title"},ko={class:"basic-item-price"},wo={class:"basic-item"},Lo={class:"basic-item-title"},No={class:"basic-item-content"},To={class:"basic-item"},Do={class:"basic-item-title"},Co={class:"basic-item-content"},So={key:0,class:"basic-item"},Ao={class:"basic-item-title"},Eo={class:"basic-item-content"},Bo={class:"basic-item"},qo={class:"basic-item-title"},Po={class:"basic-item-content"},Vo={class:"basic-item"},Uo={class:"basic-item-title"},xo={class:"basic-item-content"},Mo={key:1},$o={key:1,class:"basic-item"},Ho={class:"basic-item-title"},Wo={class:"basic-item-content"},Fo={class:"basic-buttons"},Oo={class:"basic-button-dropdown-span"},zo={class:"demo-item-title"},Go={class:"demo-image"},Ro=["src"],Qo={key:0,class:"goods-developer"},Yo={class:"developer-header"},jo={class:"developer-name"},Jo={class:"developer-nickname"},Ko={class:"developer-group"},Xo={key:0,class:"developer-contact"},Zo={class:"developer-info-title"},oe={class:"contact-item"},ee=["href"],se={class:"developer-recommend"},te={class:"developer-info-title"},ne={key:0,class:"recommend-goods"},de=["onClick"],le={class:"recommend-goods-title"},ae={key:1,class:"data-empty"},ie=["innerHTML"],ce={class:"goods-version"},re={key:0,class:"version-timeline"},_e={class:"version-card-header"},ue={class:"version-short-describe"},me=["innerHTML"],ge={key:1,class:"empty-update-log"},fe=uo({__name:"goodsInfo",setup(pe){const h={InstallNow:[r.UNINSTALLED,r.WAIT_INSTALL],continueInstallation:[r.CONFLICT_PENDING,r.DEPENDENT_WAIT_INSTALL],alreadyInstalled:[r.INSTALLED],stateSwitch:[r.INSTALLED,r.CONFLICT_PENDING,r.DEPENDENT_WAIT_INSTALL,r.DISABLE],updateButton:[r.WAIT_INSTALL,r.INSTALLED,r.DISABLE],buy:[r.UNINSTALLED]},{t:l}=io(),q=(f,i)=>{!i||!f||window.open(f)},P=()=>{e.goodsInfo.enable?to(e.goodsInfo.uid):(e.common.disableParams={uid:e.goodsInfo.uid,state:0},E())},V=f=>{e.loading.common=!0,K(f).then(()=>{no(),e.dialog.goodsInfo=!1}).finally(()=>{e.loading.common=!1})},U=(f,i)=>{const k=X();if(!k.token){e.dialog.baAccount=!0;return}e.loading.common=!0,Z(f).then(N=>{N.data.state==r.DISABLE?oo(f,i).then(()=>{C(f,i)}).catch(T=>{lo(T)}):go.confirm(l("module.You need to disable this module before updating Do you want to disable it now?"),l("Reminder"),{confirmButtonText:l("module.Disable and update"),cancelButtonText:l("Cancel"),type:"warning"}).then(()=>{e.common.disableParams={uid:f,state:0,update:1,order:i,token:k.token},E()}).catch(()=>{})}).finally(()=>{e.loading.common=!1})};return(f,i)=>{const k=c("el-image"),N=c("el-carousel-item"),T=c("el-carousel"),x=c("el-tag"),M=c("el-link"),$=c("el-switch"),A=c("Icon"),v=c("el-button"),H=c("el-popover"),W=c("el-dropdown-item"),F=c("el-dropdown-menu"),O=c("el-dropdown"),z=c("el-avatar"),G=c("el-card"),R=c("el-timeline-item"),Q=c("el-timeline"),Y=c("el-scrollbar"),j=c("el-dialog"),y=B("blur"),D=B("loading");return n(),_("div",null,[m(j,{modelValue:o(e).dialog.goodsInfo,"onUpdate:modelValue":i[5]||(i[5]=d=>o(e).dialog.goodsInfo=d),class:"goods-info-dialog",title:o(l)("module.detailed information"),width:"60%"},{default:a(()=>[b((n(),u(Y,{key:o(e).goodsInfo.uid,height:500},{default:a(()=>[s("div",fo,[s("div",po,[o(e).goodsInfo.images?(n(),u(T,{key:0,height:"300","indicator-position":"outside"},{default:a(()=>[(n(!0),_(w,null,L(o(e).goodsInfo.images,(d,p)=>(n(),u(N,{class:"goods-image-item",key:p},{default:a(()=>[m(k,{fit:"contain","preview-src-list":o(e).goodsInfo.images,"preview-teleported":!0,src:d},null,8,["preview-src-list","src"])]),_:2},1024))),128))]),_:1})):g("",!0)]),s("div",Io,[s("h4",ho,t(o(e).goodsInfo.title),1),s("div",vo,[(n(!0),_(w,null,L(o(e).goodsInfo.tags,(d,p)=>(n(),u(x,{key:p,type:d.type},{default:a(()=>[I(t(d.name),1)]),_:2},1032,["type"]))),128))]),s("div",bo,[s("div",yo,t(o(l)("module.Price")),1),s("div",ko,t(typeof o(e).goodsInfo.currency_select<"u"?o(eo)(o(e).goodsInfo.present_price,o(e).goodsInfo.currency_select):"-"),1)]),s("div",wo,[s("div",Lo,t(o(l)("module.Last updated")),1),s("div",No,t(o(e).goodsInfo.updatetime?o(S)(o(e).goodsInfo.updatetime):"-"),1)]),s("div",To,[s("div",Do,t(o(l)("module.Published on")),1),s("div",Co,t(o(e).goodsInfo.createtime?o(S)(o(e).goodsInfo.createtime):"-"),1)]),h.stateSwitch.includes(o(e).goodsInfo.state)?g("",!0):(n(),_("div",So,[s("div",Ao,t(o(l)("module.amount of downloads")),1),s("div",Eo,t(o(e).goodsInfo.downloads?o(e).goodsInfo.downloads:"-"),1)])),s("div",Bo,[s("div",qo,t(o(l)("module.Module classification")),1),s("div",Po,t(o(e).goodsInfo.category?o(e).goodsInfo.category.name:"-"),1)]),s("div",Vo,[s("div",Uo,t(o(l)("module.Developer Homepage")),1),s("div",xo,[o(e).goodsInfo.author_url?(n(),u(M,{key:0,type:"primary",class:"developer-homepage",target:"_blank",href:o(e).goodsInfo.author_url},{default:a(()=>[I(t(o(l)("module.Click to access")),1)]),_:1},8,["href"])):(n(),_("span",Mo,"-"))])]),h.stateSwitch.includes(o(e).goodsInfo.state)?(n(),_("div",$o,[s("div",Ho,t(o(l)("module.Module status")),1),s("div",Wo,[m($,{onChange:P,loading:o(e).loading.common,disabled:o(e).loading.common,modelValue:o(e).goodsInfo.enable,"onUpdate:modelValue":i[0]||(i[0]=d=>o(e).goodsInfo.enable=d)},null,8,["loading","disabled","modelValue"])])])):g("",!0),s("div",Fo,[(!o(e).goodsInfo.purchased||h.InstallNow.includes(o(e).goodsInfo.state))&&o(e).goodsInfo.demo&&o(e).goodsInfo.demo.length>0?(n(),u(O,{key:0},{dropdown:a(()=>[m(F,null,{default:a(()=>[(n(!0),_(w,null,L(o(e).goodsInfo.demo,(d,p)=>(n(),u(W,{key:p,onClick:J=>q(d.link,!d.image),class:"basic-button-dropdown-item"},{default:a(()=>[m(H,{placement:"right",title:o(l)("module.Code scanning Preview"),trigger:"hover",disabled:!d.image,width:174},{reference:a(()=>[s("div",zo,[m(A,{name:d.icon,size:"14",color:"var(--el-color-primary)"},null,8,["name"]),I(t(d.title),1)])]),default:a(()=>[s("div",Go,[s("img",{src:d.image,alt:""},null,8,Ro)])]),_:2},1032,["title","disabled"])]),_:2},1032,["onClick"]))),128))]),_:1})]),default:a(()=>[m(v,{class:"basic-button-demo",type:"primary"},{default:a(()=>[s("span",Oo,t(o(l)("module.View demo")),1),m(A,{color:"#ffffff",size:"16",name:"el-icon-ArrowDown"})]),_:1})]),_:1})):g("",!0),!o(e).goodsInfo.purchased&&h.buy.includes(o(e).goodsInfo.state)&&o(e).goodsInfo.type=="online"?b((n(),u(v,{key:1,onClick:o(so),class:"basic-button-item",type:"danger"},{default:a(()=>[I(t(o(l)("module.Buy now")),1)]),_:1},8,["onClick"])),[[y]]):g("",!0),o(e).goodsInfo.state==o(r).UNINSTALLED&&o(e).goodsInfo.purchased||o(e).goodsInfo.state==o(r).WAIT_INSTALL?b((n(),u(v,{key:2,onClick:i[1]||(i[1]=d=>o(C)(o(e).goodsInfo.uid,o(e).goodsInfo.purchased)),loading:o(e).loading.common,class:"basic-button-item",type:"success"},{default:a(()=>[I(t(o(l)("module.Install now")),1)]),_:1},8,["loading"])),[[y]]):g("",!0),h.continueInstallation.includes(o(e).goodsInfo.state)?b((n(),u(v,{key:3,onClick:i[2]||(i[2]=d=>o(C)(o(e).goodsInfo.uid,o(e).goodsInfo.purchased)),loading:o(e).loading.common,class:"basic-button-item",type:"success"},{default:a(()=>[I(t(o(l)("module.continue installation")),1)]),_:1},8,["loading"])),[[y]]):g("",!0),h.alreadyInstalled.includes(o(e).goodsInfo.state)?b((n(),u(v,{key:4,disabled:!0,class:"basic-button-item"},{default:a(()=>[I(t(o(l)("module.installed"))+" v"+t(o(e).goodsInfo.version),1)]),_:1})),[[y]]):g("",!0),o(e).goodsInfo.type=="local"&&!h.alreadyInstalled.includes(o(e).goodsInfo.state)?b((n(),u(v,{key:5,disabled:!0,class:"basic-button-item"},{default:a(()=>[I(t(o(l)("module.Local module"))+" v"+t(o(e).goodsInfo.version),1)]),_:1})),[[y]]):g("",!0),o(e).goodsInfo.new_version&&h.updateButton.includes(o(e).goodsInfo.state)?b((n(),u(v,{key:6,onClick:i[3]||(i[3]=d=>U(o(e).goodsInfo.uid,o(e).goodsInfo.purchased)),class:"basic-button-item",type:"success"},{default:a(()=>[I(t(o(l)("module.to update")),1)]),_:1})),[[D,o(e).loading.common],[y]]):g("",!0),h.stateSwitch.includes(o(e).goodsInfo.state)?b((n(),u(v,{key:7,onClick:i[4]||(i[4]=d=>V(o(e).goodsInfo.uid)),class:"basic-button-item",type:"danger"},{default:a(()=>[I(t(o(l)("module.uninstall")),1)]),_:1})),[[D,o(e).loading.common],[y]]):g("",!0)])]),o(mo)(o(e).goodsInfo.developer)?g("",!0):(n(),_("div",Qo,[s("div",Yo,[m(z,{size:60,src:o(e).goodsInfo.developer.avatar},null,8,["src"]),s("div",jo,[s("h3",Jo,t(o(e).goodsInfo.developer.nickname),1),s("div",Ko,t(o(e).goodsInfo.developer.group?o(e).goodsInfo.developer.group:"-"),1)])]),o(e).goodsInfo.qq?(n(),_("div",Xo,[s("h4",Zo,t(o(l)("module.Contact developer")),1),s("div",oe,[s("a",{target:"_blank",href:"http://wpa.qq.com/msgrd?v=3&uin="+o(e).goodsInfo.qq+"&site=qq&menu=yes"},"QQï¼š"+t(o(e).goodsInfo.qq),9,ee)])])):g("",!0),s("div",se,[s("h4",te,t(o(l)("module.Other works of developers")),1),o(e).goodsInfo.developer.goods.length>0?(n(),_("div",ne,[(n(!0),_(w,null,L(o(e).goodsInfo.developer.goods,(d,p)=>(n(),_("div",{key:p,onClick:J=>o(ao)(d.uid),class:"recommend-goods-item"},[m(k,{fit:"contain",class:"recommend-goods-logo",src:d.logo},null,8,["src"]),s("div",le,t(d.title),1)],8,de))),128))])):(n(),_("div",ae,t(o(l)("module.There are no more works")),1))])]))]),s("div",{class:"goods-detail ba-markdown",innerHTML:o(e).goodsInfo.detail_editor},null,8,ie),s("div",ce,[s("h1",null,t(o(l)("module.Update Log")),1),o(e).goodsInfo.version_log?(n(),_("div",re,[m(Q,null,{default:a(()=>[(n(!0),_(w,null,L(o(e).goodsInfo.version_log,(d,p)=>(n(),u(R,{key:p,timestamp:o(S)(d.createtime),placement:"top",color:p==0?"var(--el-color-success)":""},{default:a(()=>[m(G,{class:"version-card",shadow:"hover"},{header:a(()=>[s("div",_e,[s("h2",null,t(d.title),1),s("span",ue,t(d.short_describe),1)])]),default:a(()=>[s("div",{class:"version-detail ba-markdown",innerHTML:d.describe?d.describe:o(l)("module.No detailed update log")},null,8,me)]),_:2},1024)]),_:2},1032,["timestamp","color"]))),128))]),_:1})])):(n(),_("div",ge,t(f.$t("module.No detailed update log")),1))])]),_:1})),[[D,o(e).loading.goodsInfo]])]),_:1},8,["modelValue","title"]),m(ro),m(_o)])}}});const we=co(fe,[["__scopeId","data-v-5f531eee"]]);export{we as default};
