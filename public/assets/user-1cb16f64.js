import{defineComponent as f,resolveComponent as n,openBlock as i,createBlock as m,withCtx as r,createVNode as e,Transition as C,unref as d,resolveDynamicComponent as b,normalizeStyle as v,onMounted as k}from"vue";import{d as I,_ as y,b as M,q as S,B,O as j}from"./index-89e26330.js";import{u as q}from"./memberCenter-893be883.js";import{h as F,r as N,g as $}from"./router-fdf560e7.js";import{ElNotification as A}from"element-plus";import{useI18n as D}from"vue-i18n";import{useRoute as H,useRouter as T,onBeforeRouteUpdate as E}from"vue-router";import{H as w}from"./header-55e7bca2.js";import O from"./aside-2fa4856f.js";import{F as R}from"./footer-c2b5a3bf.js";import{m as x}from"./layout-790be4ff.js";import"pinia";import"vue-demi";import"./logo-dbed91f4.js";import"./menu-c85258cb.js";function P(){return new Promise(l=>{l({type:"continue"})})}const U=f({__name:"main",setup(l){const c=I();return(u,a)=>{const s=n("router-view"),o=n("el-main");return i(),m(o,{class:"layout-main"},{default:r(()=>[e(s,null,{default:r(({Component:t})=>[e(C,{name:d(c).layout.mainAnimation,mode:"out-in"},{default:r(()=>[(i(),m(b(t)))]),_:2},1032,["name"])]),_:1})]),_:1})}}});const z=y(U,[["__scopeId","data-v-bc73de31"]]),J=f({__name:"default",setup(l){return(c,u)=>{const a=n("el-col"),s=n("el-row"),o=n("el-scrollbar"),t=n("el-container");return i(),m(t,{class:"is-vertical"},{default:r(()=>[e(w),e(o,{style:v(d(x)()),ref:"mainScrollbarRef"},{default:r(()=>[e(s,{class:"frontend-footer-brother",justify:"center"},{default:r(()=>[e(a,{class:"user-layouts"},{default:r(()=>[e(O,{class:"hidden-sm-and-down"}),e(z)]),_:1})]),_:1}),e(R)]),_:1},8,["style"])]),_:1})}}});const L=y(J,[["__scopeId","data-v-1a961b33"]]),V=f({__name:"disable",setup(l){return(c,u)=>{const a=n("el-alert"),s=n("el-col"),o=n("el-row"),t=n("el-scrollbar"),_=n("el-container");return i(),m(_,{class:"is-vertical"},{default:r(()=>[e(w),e(t,{style:v(d(x)()),ref:"mainScrollbarRef"},{default:r(()=>[e(o,{class:"frontend-footer-brother",justify:"center"},{default:r(()=>[e(s,{class:"user-layouts",span:16,xs:24},{default:r(()=>[e(a,{center:!0,title:c.$t("Member center disabled"),type:"error"},null,8,["title"])]),_:1})]),_:1}),e(R)]),_:1},8,["style"])]),_:1})}}});const W=y(V,[["__scopeId","data-v-e004cd2e"]]),G={components:{Default:L,Disable:W}},ue=f({...G,__name:"user",setup(l){const{t:c}=D(),u=H(),a=T(),s=M(),o=q();return E(t=>{o.setActiveRoute(t)}),k(async()=>{const t=await P();if(t.type!="break"){if(t.type=="reload")return window.location.href=t.url;if(!s.token)return a.push({name:"userLogin"});S().then(_=>{if(_.data.userInfo.refreshToken=s.refreshToken,s.dataFill(_.data.userInfo),_.data.menus){if(F(_.data.menus),t.type=="jump")return a.push(t.url);if(u.params.to){const p=JSON.parse(u.params.to);if(p.path!=B.path){let g=j(p.query)?{}:p.query;N({path:p.path,query:g});return}}let h=$(o.state.viewRoutes);h?a.push({path:h.path}):A({type:"error",message:c("No route found to jump~")})}}),document.body.clientWidth<1024?o.setShrink(!0):o.setShrink(!1)}}),(t,_)=>(i(),m(b(d(o).state.layoutMode)))}});export{ue as default};
