import{h as Ae,r as S,p as d,l as Pe,C as m,k as n,S as g,$ as M,a6 as N,L as Me,D as y,N as Te,U as K,M as R,o as Ee,q as b,m as De,t as A,R as B}from"./vue-8b21a996.js";import{F as f}from"./index-5ee44d7a.js";import{c as Ie,b as h}from"./validate-322d0259.js";import{c as q,i as Ue,l as Se}from"./index-fb3df3be.js";import{i as P}from"./index-7398acdb.js";const w="/admin/routine.config/",z=new Map([["index",w+"index"],["add",w+"add"],["edit",w+"edit"],["del",w+"del"]]);function Le(){return q({url:z.get("index"),method:"get"})}function qe(r,c){return q({url:z.get(r),method:"post",data:c},{showSuccessMessage:!0})}function Oe(r){return q({url:z.get("del"),method:"DELETE",params:{ids:r}},{showSuccessMessage:!0})}function $e(r,c){return q({url:w+"sendTestMail",method:"POST",data:Object.assign({},r,{testMail:c})},{showSuccessMessage:!0})}const _e=Ae({__name:"createData",props:{dataTitle:{default:Ue.global.t("utils.Var")},modelValue:{default:()=>({name:"",title:"",type:"",tip:"",rule:[],extend:"",dict:"",inputExtend:""})},options:null,excludeInputTypes:{default:()=>[]},excludeValidatorRule:{default:()=>[]}},emits:["update:modelValue"],setup(r,{emit:c}){var o,C,T,x,E,D,I,U,s,F,L,O,$,W,G,j,H,J,Q,X,Y,Z,ee,te,le,ae,oe,ie,ne,ue,de,re;const t=r,{t:l}=Ue.global,V=["radio","checkbox","select","selects"],e=S({name:{show:((C=(o=t.options)==null?void 0:o.name)==null?void 0:C.show)!==!1,value:t.modelValue.name,title:((x=(T=t.options)==null?void 0:T.name)==null?void 0:x.title)??t.dataTitle+l("utils.Name")},title:{show:((D=(E=t.options)==null?void 0:E.title)==null?void 0:D.show)!==!1,value:t.modelValue.title,title:((U=(I=t.options)==null?void 0:I.title)==null?void 0:U.title)??t.dataTitle+l("utils.Title")},type:{show:((F=(s=t.options)==null?void 0:s.type)==null?void 0:F.show)!==!1,value:t.modelValue.type,title:((O=(L=t.options)==null?void 0:L.type)==null?void 0:O.title)??t.dataTitle+l("utils.type")},tip:{show:((W=($=t.options)==null?void 0:$.tip)==null?void 0:W.show)!==!1,value:t.modelValue.tip,title:((j=(G=t.options)==null?void 0:G.tip)==null?void 0:j.title)??l("utils.Tip")},rule:{show:((J=(H=t.options)==null?void 0:H.rule)==null?void 0:J.show)!==!1,value:t.modelValue.rule,title:((X=(Q=t.options)==null?void 0:Q.rule)==null?void 0:X.title)??l("utils.Rule")},extend:{show:((Z=(Y=t.options)==null?void 0:Y.extend)==null?void 0:Z.show)!==!1,value:t.modelValue.extend,title:((te=(ee=t.options)==null?void 0:ee.extend)==null?void 0:te.title)??"FormItem "+l("utils.Extend")},dict:{show:((ae=(le=t.options)==null?void 0:le.dict)==null?void 0:ae.show)!==!1,value:t.modelValue.dict,title:((ie=(oe=t.options)==null?void 0:oe.dict)==null?void 0:ie.title)??l("utils.Dict")},inputExtend:{show:((ue=(ne=t.options)==null?void 0:ne.inputExtend)==null?void 0:ue.show)!==!1,value:t.modelValue.inputExtend,title:((re=(de=t.options)==null?void 0:de.inputExtend)==null?void 0:re.title)??"Input "+l("utils.Extend")}}),v=S({validators:{},inputTypes:{}}),u=()=>{c("update:modelValue",{name:e.name.value??"",title:e.title.value??"",type:e.type.value??"",tip:e.tip.value??"",rule:e.rule.value??[],extend:e.extend.value??"",dict:V.includes(e.type.value??"")?e.dict.value??"":"",inputExtend:e.inputExtend.value??""})};return(()=>{let _={};for(const p in P)t.excludeInputTypes.includes(P[p])||(_[P[p]]=P[p]);v.inputTypes=_;let a={};for(const p in Ie)t.excludeValidatorRule.includes(p)||(a[p]=Ie[p]);v.validators=a,u()})(),(_,a)=>{var p,se,pe,me,fe,ce,ge,ye,Ve,ve,be,he,xe,we,ke,Ce;return d(),Pe("div",null,[e.name.show?(d(),m(f,{key:0,label:e.name.title,type:"string",modelValue:e.name.value,"onUpdate:modelValue":a[0]||(a[0]=i=>e.name.value=i),placeholder:n(l)("Please input field",{field:e.name.title}),"input-attr":{onChange:u,...(se=(p=t.options)==null?void 0:p.name)==null?void 0:se.inputAttr},prop:"name"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.title.show?(d(),m(f,{key:1,label:e.title.title,type:"string",modelValue:e.title.value,"onUpdate:modelValue":a[1]||(a[1]=i=>e.title.value=i),placeholder:n(l)("Please input field",{field:e.title.title}),"input-attr":{onChange:u,...(me=(pe=t.options)==null?void 0:pe.title)==null?void 0:me.inputAttr},prop:"title"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.type.show?(d(),m(f,{key:2,label:e.type.title,type:"select",modelValue:e.type.value,"onUpdate:modelValue":a[2]||(a[2]=i=>e.type.value=i),data:{content:v.inputTypes},placeholder:n(l)("Please select field",{field:e.type.title}),"input-attr":{onChange:u,...(ce=(fe=t.options)==null?void 0:fe.type)==null?void 0:ce.inputAttr},prop:"type"},null,8,["label","modelValue","data","placeholder","input-attr"])):g("",!0),e.dict.show&&V.includes(e.type.value)?(d(),m(f,{key:3,label:e.dict.title,type:"textarea",modelValue:e.dict.value,"onUpdate:modelValue":a[3]||(a[3]=i=>e.dict.value=i),"input-attr":{rows:3,placeholder:n(l)("utils.One line at a time, without quotation marks, for example: key1=value1"),onChange:u,...(ye=(ge=t.options)==null?void 0:ge.dict)==null?void 0:ye.inputAttr},prop:"dict",onKeyup:a[4]||(a[4]=M(N(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):g("",!0),e.tip.show?(d(),m(f,{key:4,label:e.tip.title,type:"string",modelValue:e.tip.value,"onUpdate:modelValue":a[5]||(a[5]=i=>e.tip.value=i),placeholder:n(l)("Please input field",{field:e.tip.title}),"input-attr":{onChange:u,...(ve=(Ve=t.options)==null?void 0:Ve.tip)==null?void 0:ve.inputAttr},prop:"tip"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.rule.show?(d(),m(f,{key:5,label:e.rule.title,type:"selects",modelValue:e.rule.value,"onUpdate:modelValue":a[6]||(a[6]=i=>e.rule.value=i),data:{content:v.validators},placeholder:n(l)("Please select field",{field:e.rule.title}),"input-attr":{onChange:u,...(he=(be=t.options)==null?void 0:be.rule)==null?void 0:he.inputAttr},prop:"rule"},null,8,["label","modelValue","data","placeholder","input-attr"])):g("",!0),e.extend.show?(d(),m(f,{key:6,label:e.extend.title,type:"textarea",modelValue:e.extend.value,"onUpdate:modelValue":a[7]||(a[7]=i=>e.extend.value=i),"input-attr":{onChange:u,placeholder:n(l)("utils.One attribute per line without quotation marks(formitem)"),...(we=(xe=t.options)==null?void 0:xe.extend)==null?void 0:we.inputAttr},prop:"extend",onKeyup:a[8]||(a[8]=M(N(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):g("",!0),e.inputExtend.show?(d(),m(f,{key:7,label:e.inputExtend.title,type:"textarea",modelValue:e.inputExtend.value,"onUpdate:modelValue":a[9]||(a[9]=i=>e.inputExtend.value=i),"input-attr":{onChange:u,placeholder:n(l)("utils.Extended properties of Input, one line without quotation marks, such as: size=large"),...(Ce=(ke=t.options)==null?void 0:ke.inputExtend)==null?void 0:Ce.inputAttr},prop:"inputExtend",onKeyup:a[10]||(a[10]=M(N(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):g("",!0)])}}}),Ne={class:"title"},We=Ae({__name:"add",props:{modelValue:{type:Boolean,default:!1},configGroup:{default:()=>({})}},emits:["update:modelValue"],setup(r,{emit:c}){const t=()=>{c("update:modelValue",!1)},{t:l}=Se(),V=Me(),e=S({inputTypes:{},labelWidth:180,submitLoading:!1,addConfig:{group:"",weigh:0,content:""},formItemData:{dict:`key1=value1
key2=value2`}}),v=S({group:[h({name:"required",trigger:"change",message:l("Please select field",{field:l("routine.config.Variable grouping")})})],name:[h({name:"required",title:l("routine.config.Variable name")}),h({name:"varName",message:l("Please enter the correct field",{field:l("routine.config.Variable name")})})],title:[h({name:"required",title:l("routine.config.Variable title")})],type:[h({name:"required",trigger:"change",message:l("Please select field",{field:l("routine.config.Variable type")})})],weigh:[h({name:"integer",title:l("routine.config.number")})]}),u=k=>{k&&k.validate(o=>{o&&(e.addConfig.content=e.formItemData.dict,delete e.formItemData.dict,qe("add",{...e.addConfig,...e.formItemData}).then(()=>{c("update:modelValue",!1)}))})};return(k,o)=>{const C=A("el-form"),T=A("el-scrollbar"),x=A("el-button"),E=A("el-dialog"),D=B("drag"),I=B("zoom"),U=B("blur");return d(),m(E,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":r.modelValue,onClose:t},{header:y(()=>[Te((d(),Pe("div",Ne,[K(R(n(l)("routine.config.Add configuration item")),1)])),[[D,[".ba-operate-dialog",".el-dialog__header"]],[I,".ba-operate-dialog"]])]),footer:y(()=>[Ee("div",{style:De("width: calc(100% - "+e.labelWidth/1.8+"px)")},[b(x,{onClick:t},{default:y(()=>[K(R(n(l)("Cancel")),1)]),_:1}),Te((d(),m(x,{loading:e.submitLoading,onClick:o[4]||(o[4]=s=>u(V.value)),type:"primary"},{default:y(()=>[K(R(n(l)("add")),1)]),_:1},8,["loading"])),[[U]])],4)]),default:y(()=>[b(T,{class:"ba-table-form-scrollbar"},{default:y(()=>[Ee("div",{class:"ba-operate-form ba-add-form",style:De("width: calc(100% - "+e.labelWidth/2+"px)")},[b(C,{ref_key:"formRef",ref:V,onKeyup:o[3]||(o[3]=M(s=>u(V.value),["enter"])),rules:v,model:{...e.addConfig,...e.formItemData},"label-position":"right","label-width":160},{default:y(()=>[b(f,{label:n(l)("routine.config.Variable grouping"),type:"select",modelValue:e.addConfig.group,"onUpdate:modelValue":o[0]||(o[0]=s=>e.addConfig.group=s),prop:"group",data:{content:r.configGroup}},null,8,["label","modelValue","data"]),b(_e,{modelValue:e.formItemData,"onUpdate:modelValue":o[1]||(o[1]=s=>e.formItemData=s)},null,8,["modelValue"]),b(f,{label:n(l)("weigh"),type:"number",modelValue:e.addConfig.weigh,"onUpdate:modelValue":o[2]||(o[2]=s=>e.addConfig.weigh=s),modelModifiers:{number:!0},prop:"weigh"},null,8,["label","modelValue"])]),_:1},8,["rules","model"])],4)]),_:1})]),_:1},8,["model-value"])}}});export{We as _,$e as a,Oe as d,Le as i,qe as p};
