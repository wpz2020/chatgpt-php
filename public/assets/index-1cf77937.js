import{d as R,am as J,j as e,v as W,u as Le,f as i,c as B,x as F,I as ne,i as x,Y as C,y as q,an as le,ao as re,e as _,_ as D,J as G,F as L,b as a,a as n,g as m,aj as U,H as ae,r as j,T as Q,o as X,ap as ce,p as te,V as ee,aq as Me,a7 as Ce,z as K,A as De,ar as ke,as as Ye,at as Ge,au as Ze,k as Ee,a0 as se,h as A,$ as xe,av as Z,aw as Qe,C as Ne,D as Pe,ax as we,w as qe,ay as et,M as Ie,az as Ae,aA as tt,aB as ot,aC as Te,aD as N,Z as We,aE as nt,aF as he,a4 as Ue,aG as Re,aH as lt,a5 as at,a1 as me,aI as Se,aJ as He,a9 as st,aK as rt,ai as ct,aL as ut}from"./index-9250cf41.js";import{_ as it}from"./logo-dbed91f4.js";import{c as dt,o as Be,g as Oe,r as _e,s as mt,a as _t}from"./router-c56b232f.js";import{I as pt}from"./index-47490f62.js";import{a as ft,i as vt}from"./index-611974f5.js";import{F as ie}from"./index-5cf5ba2e.js";import{m as yt}from"./layout-5d1959c6.js";import"./memberCenter-56f43a26.js";import"./controllerUrls-941681c3.js";import"./index-bb9265a5.js";const gt={class:"layout-logo"},bt={key:0,class:"logo-img",src:it,alt:"logo"},ht=R({__name:"logo",setup(y){J(u=>({"7ccdc331":e(t).layout.layoutMode!="Streamline"?e(t).getColorVal("menuTopBarBackground"):"transparent"}));const t=W(),o=Le(),c=function(){t.layout.shrink&&!t.layout.menuCollapse&&dt(),t.setLayout("menuCollapse",!t.layout.menuCollapse),le.set(re,{layoutMode:t.layout.layoutMode,menuCollapse:t.layout.menuCollapse})};return(u,d)=>{const b=_("Icon");return i(),B("div",gt,[e(t).layout.menuCollapse?F("",!0):(i(),B("img",bt)),e(t).layout.menuCollapse?F("",!0):(i(),B("div",{key:1,style:ne({color:e(t).getColorVal("menuActiveColor")}),class:"website-name"},x(e(o).siteName),5)),e(t).layout.layoutMode!="Streamline"?(i(),C(b,{key:2,onClick:c,name:e(t).layout.menuCollapse?"fa fa-indent":"fa fa-dedent",class:q([e(t).layout.menuCollapse?"unfold":"","fold"]),color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["name","class","color"])):F("",!0)])}}});const Ke=D(ht,[["__scopeId","data-v-2bc92dbe"]]),Ct=R({__name:"menuTree",props:{menus:{default:()=>[]}},setup(y){const t=y;J(c=>({"60e214b9":e(o).getColorVal("menuActiveBackground")}));const o=W();return(c,u)=>{const d=_("Icon"),b=_("menu-tree",!0),g=_("el-sub-menu"),k=_("el-menu-item");return i(!0),B(L,null,G(t.menus,r=>(i(),B(L,null,[r.children&&r.children.length>0?(i(),C(g,{index:r.path,key:r.path},{title:a(()=>{var p,f,l,s;return[n(d,{color:e(o).getColorVal("menuColor"),name:(p=r.meta)!=null&&p.icon?(f=r.meta)==null?void 0:f.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),m("span",null,x((l=r.meta)!=null&&l.title?(s=r.meta)==null?void 0:s.title:c.$t("noTitle")),1)]}),default:a(()=>[n(b,{menus:r.children},null,8,["menus"])]),_:2},1032,["index"])):(i(),C(k,{index:r.path,key:r.path,onClick:p=>e(Be)(r)},{default:a(()=>{var p,f,l,s;return[n(d,{color:e(o).getColorVal("menuColor"),name:(p=r.meta)!=null&&p.icon?(f=r.meta)==null?void 0:f.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),m("span",null,x((l=r.meta)!=null&&l.title?(s=r.meta)==null?void 0:s.title:c.$t("noTitle")),1)]}),_:2},1032,["index","onClick"]))],64))),256)}}});const pe=D(Ct,[["__scopeId","data-v-c669345e"]]),kt=R({__name:"menuVertical",setup(y){J(r=>({"1dde85aa":e(b),"72fdaa31":e(t).getColorVal("menuBackground"),b0a765a4:e(t).getColorVal("menuColor"),"4fe2d048":e(t).getColorVal("menuActiveColor")}));const t=W(),o=U(),c=te(),u=ae(),d=j({defaultActive:""}),b=Q(()=>{let r=0;return t.layout.menuShowTopBar&&(r=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+r)+"px)":"calc(100vh - "+r+"px)"}),g=r=>{d.defaultActive=r.path},k=()=>{ee(()=>{var p;let r=document.querySelector(".el-menu.layouts-menu-vertical li.is-active");if(!r)return!1;(p=u.value)==null||p.setScrollTop(r.offsetTop)})};return X(()=>{g(c),k()}),ce(r=>{g(r)}),(r,p)=>{const f=_("el-menu"),l=_("el-scrollbar");return i(),C(l,{ref_key:"verticalMenusRef",ref:u,class:"vertical-menus-scrollbar"},{default:a(()=>[n(f,{class:"layouts-menu-vertical","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":d.defaultActive,collapse:e(t).layout.menuCollapse},{default:a(()=>[n(pe,{menus:e(o).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}});const $e=(y,t)=>{for(let o=0;o<t.length;o++){const c=t[o];if(c.path==y||c.children&&c.children.length>0&&$e(y,c.children))return c}return!1},xt=R({__name:"menuVerticalChildren",setup(y){J(r=>({"6cb75450":e(b),"6f812742":e(t).getColorVal("menuBackground"),"08696640":e(t).getColorVal("menuColor"),ba4d584c:e(t).getColorVal("menuActiveColor")}));const t=W(),o=U(),c=te(),u=ae(),d=j({defaultActive:"",routeChildren:[]}),b=Q(()=>{let r=0;return t.layout.menuShowTopBar&&(r=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+r)+"px)":"calc(100vh - "+r+"px)"}),g=r=>{let p=$e(r.path,o.state.tabsViewRoutes);p?(d.defaultActive=r.path,p.children&&p.children.length>0?d.routeChildren=p.children:d.routeChildren=[p]):d.routeChildren||(d.routeChildren=o.state.tabsViewRoutes)},k=()=>{ee(()=>{var p;let r=document.querySelector(".el-menu.layouts-menu-vertical-children li.is-active");if(!r)return!1;(p=u.value)==null||p.setScrollTop(r.offsetTop)})};return X(()=>{g(c),k()}),ce(r=>{g(r)}),(r,p)=>{const f=_("el-menu"),l=_("el-scrollbar");return i(),C(l,{ref_key:"verticalMenusRef",ref:u,class:"children-vertical-menus-scrollbar"},{default:a(()=>[n(f,{class:"layouts-menu-vertical-children","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":d.defaultActive,collapse:e(t).layout.menuCollapse},{default:a(()=>[d.routeChildren.length>0?(i(),C(pe,{key:0,menus:d.routeChildren},null,8,["menus"])):F("",!0)]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}});const wt=R({name:"layout/aside"}),Tt=R({...wt,setup(y){J(u=>({"4fc65662":e(c)}));const t=W(),o=U(),c=Q(()=>t.menuWidth());return(u,d)=>{const b=_("el-aside");return e(o).state.tabFullScreen?F("",!0):(i(),C(b,{key:0,class:q("layout-aside-"+e(t).layout.layoutMode+" "+(e(t).layout.shrink?"shrink":""))},{default:a(()=>[e(t).layout.menuShowTopBar?(i(),C(Ke,{key:0})):F("",!0),e(t).layout.layoutMode=="Double"?(i(),C(xt,{key:1})):(i(),C(kt,{key:2}))]),_:1},8,["class"]))}}});const Ve=D(Tt,[["__scopeId","data-v-9423bcd6"]]);function je(){if(!Me())throw new Error("useCurrentInstance() can only be used inside setup() or functional components!");const{appContext:y}=Me();return{proxy:y.config.globalProperties}}const St={class:"el-dropdown-menu"},Bt=["onClick"],$t=R({__name:"index",props:{width:{default:150},items:{default:()=>[]}},emits:["contextmenuItemClick"],setup(y,{expose:t,emit:o}){const c=y,u=j({show:!1,axis:{x:0,y:0},menu:void 0,arrowAxis:10}),d=(k,r)=>{u.menu=k,u.axis=r,u.show=!0},b=k=>{k.disabled||(k.menu=Ye(u.menu),o("contextmenuItemClick",k))},g=()=>{u.show=!1};return t({onShowContextmenu:d,onHideContextmenu:g}),X(()=>{Ce(document,"click",g)}),(k,r)=>{const p=_("Icon");return i(),C(ke,{name:"el-zoom-in-center"},{default:a(()=>[K((i(),B("div",{class:"el-popper is-pure is-light el-dropdown__popper ba-contextmenu",style:ne(`top: ${u.axis.y+5}px;left: ${u.axis.x-14}px;width:${c.width}px`),key:Math.random(),"aria-hidden":"false","data-popper-placement":"bottom"},[m("ul",St,[(i(!0),B(L,null,G(c.items,(f,l)=>(i(),B("li",{key:l,class:q(["el-dropdown-menu__item",f.disabled?"is-disabled":""]),tabindex:"-1",onClick:s=>b(f)},[n(p,{size:"12",name:f.icon},null,8,["name"]),m("span",null,x(f.label),1)],10,Bt))),128))]),m("span",{class:"el-popper__arrow",style:ne({left:`${u.arrowAxis}px`})},null,4)],4)),[[De,u.show]])]),_:1})}}});const Vt=D($t,[["__scopeId","data-v-f1121b30"]]),Mt=["onClick","onContextmenu"],It=R({__name:"tabs",setup(y){J(v=>({"31b5539f":e(c).getColorVal("headerBarTabColor"),"2e2f7df9":e(c).getColorVal("headerBarTabActiveColor"),"259678a4":e(c).layout.layoutMode=="Default"?"none":e(c).getColorVal("headerBarBackground")}));const t=te(),o=Ee(),c=W(),u=U(),{proxy:d}=je(),b=ae(),g=Ge(),k=ae(),r=j({contextmenuItems:[{name:"refresh",label:"重新加载",icon:"fa fa-refresh"},{name:"close",label:"关闭标签",icon:"fa fa-times"},{name:"fullScreen",label:"当前标签全屏",icon:"el-icon-FullScreen"},{name:"closeOther",label:"关闭其他标签",icon:"fa fa-minus"},{name:"closeAll",label:"关闭全部标签",icon:"fa fa-stop"}]}),p=j({width:"0",transform:"translateX(0px)"}),f=v=>{o.push(v)},l=(v,S)=>{r.contextmenuItems[0].disabled=t.path!==v.path,r.contextmenuItems[4].disabled=r.contextmenuItems[3].disabled=u.state.tabsView.length==1;const{clientX:M,clientY:H}=S;k.value.onShowContextmenu(v,{x:M,y:H})},s=function(v){if(!v)return!1;p.width=v.clientWidth+"px",p.transform=`translateX(${v.offsetLeft}px)`;let S=v.offsetLeft+v.clientWidth-b.value.clientWidth;v.offsetLeft<b.value.scrollLeft?b.value.scrollTo(v.offsetLeft,0):S>b.value.scrollLeft&&b.value.scrollTo(S,0)},z=()=>{const v=u.state.tabsView.slice(-1)[0];v?o.push(v.path):o.push("/admin")},E=v=>{var S;u.closeTab(v),d.eventBus.emit("onTabViewClose",v),((S=u.state.activeRoute)==null?void 0:S.path)===v.path?z():(u.setActiveRoute(u.state.activeRoute),ee(()=>{s(g.value[u.state.activeIndex])})),k.value.onHideContextmenu()},V=v=>{var S;u.closeTabs(v),u.setActiveRoute(v),((S=u.state.activeRoute)==null?void 0:S.path)!==t.path&&o.push(v.path)},w=v=>{let S=Oe(u.state.tabsViewRoutes);if(S&&S.path==v.path)return V(v);u.closeTabs(!1),S&&_e(S.path)},$=async v=>{const{name:S,menu:M}=v;if(M)switch(S){case"refresh":d.eventBus.emit("onTabViewRefresh",M);break;case"close":E(M);break;case"closeOther":V(M);break;case"closeAll":w(M);break;case"fullScreen":t.path!==(M==null?void 0:M.path)&&o.push(M==null?void 0:M.path),u.setFullScreen(!0);break}},I=function(v){u.addTab(v),u.setActiveRoute(v),ee(()=>{s(g.value[u.state.activeIndex])})};return ce(async v=>{I(v)}),X(()=>{I(o.currentRoute.value),new Ze(b.value)}),(v,S)=>{const M=_("Icon");return i(),B(L,null,[m("div",{class:"nav-tabs",ref_key:"tabScrollbarRef",ref:b},[(i(!0),B(L,null,G(e(u).state.tabsView,(H,oe)=>(i(),B("div",{onClick:P=>f(H),onContextmenu:se(P=>l(H,P),["prevent"]),class:q(["ba-nav-tab",e(u).state.activeIndex==oe?"active":""]),ref_for:!0,ref:e(g).set,key:oe},[A(x(H.meta.title)+" ",1),n(ke,{onAfterLeave:S[0]||(S[0]=P=>s(e(g)[e(u).state.activeIndex])),name:"el-fade-in"},{default:a(()=>[K(n(M,{class:"close-icon",onClick:se(P=>E(H),["stop"]),size:"15",name:"el-icon-Close"},null,8,["onClick"]),[[De,e(u).state.tabsView.length>1]])]),_:2},1024)],42,Mt))),128)),m("div",{style:ne(p),class:"nav-tabs-active-box"},null,4)],512),n(Vt,{ref_key:"contextmenuRef",ref:k,items:r.contextmenuItems,onContextmenuItemClick:$},null,8,["items"])],64)}}});const Je=D(It,[["__scopeId","data-v-1d396a22"]]),Fe=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Y=(()=>{if(typeof document>"u")return!1;const y=Fe[0],t={};for(const o of Fe)if((o==null?void 0:o[1])in document){for(const[u,d]of o.entries())t[y[u]]=d;return t}return!1})(),ze={change:Y.fullscreenchange,error:Y.fullscreenerror};let O={request(y=document.documentElement,t){return new Promise((o,c)=>{const u=()=>{O.off("change",u),o()};O.on("change",u);const d=y[Y.requestFullscreen](t);d instanceof Promise&&d.then(u).catch(c)})},exit(){return new Promise((y,t)=>{if(!O.isFullscreen){y();return}const o=()=>{O.off("change",o),y()};O.on("change",o);const c=document[Y.exitFullscreen]();c instanceof Promise&&c.then(o).catch(t)})},toggle(y,t){return O.isFullscreen?O.exit():O.request(y,t)},onchange(y){O.on("change",y)},onerror(y){O.on("error",y)},on(y,t){const o=ze[y];o&&document.addEventListener(o,t,!1)},off(y,t){const o=ze[y];o&&document.removeEventListener(o,t,!1)},raw:Y};Object.defineProperties(O,{isFullscreen:{get:()=>Boolean(document[Y.fullscreenElement])},element:{enumerable:!0,get:()=>document[Y.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[Y.fullscreenEnabled])}});Y||(O={isEnabled:!1});const de=O,fe=y=>(Ne("data-v-e049124d"),y=y(),Pe(),y),At={class:"layout-config-drawer"},Rt={class:"layout-mode-styles-box"},Ft={class:"layout-mode-box-style"},zt=fe(()=>m("div",{class:"layout-mode-style-box"},[m("div",{class:"layout-mode-style-aside"}),m("div",{class:"layout-mode-style-container-box"},[m("div",{class:"layout-mode-style-header"}),m("div",{class:"layout-mode-style-container"})])],-1)),Lt={class:"layout-mode-style-name"},Dt=fe(()=>m("div",{class:"layout-mode-style-box"},[m("div",{class:"layout-mode-style-aside"}),m("div",{class:"layout-mode-style-container-box"},[m("div",{class:"layout-mode-style-header"}),m("div",{class:"layout-mode-style-container"})])],-1)),Et={class:"layout-mode-style-name"},Nt=fe(()=>m("div",{class:"layout-mode-style-box"},[m("div",{class:"layout-mode-style-container-box"},[m("div",{class:"layout-mode-style-header"}),m("div",{class:"layout-mode-style-container"})])],-1)),Pt={class:"layout-mode-style-name"},qt=fe(()=>m("div",{class:"layout-mode-style-box"},[m("div",{class:"layout-mode-style-aside"}),m("div",{class:"layout-mode-style-container-box"},[m("div",{class:"layout-mode-style-header"}),m("div",{class:"layout-mode-style-container"})])],-1)),Wt={class:"layout-mode-style-name"},Ut={class:"layout-config-global"},Ht={class:"layout-config-aside"},Ot={class:"layout-config-aside"},Kt={class:"ba-center"},jt=R({__name:"config",setup(y){const{t}=xe(),o=W(),c=U(),u=Ee(),d=(f,l)=>{o.setLayout(l,f)},b=(f,l)=>{if(f===null)return;const s=o.layout[l];o.layout.isDark?s[1]=f:s[0]=f,o.setLayout(l,s)},g=f=>{le.set(re,{layoutMode:f,menuCollapse:o.layout.menuCollapse}),o.setLayoutMode(f)},k=(f,l)=>{o.setLayout(l,f);const s=c.state.tabsViewRoutes;c.setTabsViewRoutes([]),setTimeout(()=>{c.setTabsViewRoutes(s)},200)},r=()=>{o.setLayout("showDrawer",!1)},p=()=>{Z.remove(Qe),le.remove(re),u.go(0)};return(f,l)=>{const s=_("el-divider"),z=_("el-col"),E=_("el-row"),V=_("el-option"),w=_("el-select"),$=_("el-form-item"),I=_("el-color-picker"),v=_("el-switch"),S=_("el-input"),M=_("el-button"),H=_("el-popconfirm"),oe=_("el-form"),P=_("el-scrollbar"),h=_("el-drawer");return i(),B("div",At,[n(h,{"model-value":e(o).layout.showDrawer,title:e(t)("layouts.Layout configuration"),size:"310px",onClose:r},{default:a(()=>[n(P,{class:"layout-mode-style-scrollbar"},{default:a(()=>[n(oe,{ref:"formRef",model:e(o).layout},{default:a(()=>[m("div",Rt,[n(s,{"border-style":"dashed"},{default:a(()=>[A(x(e(t)("layouts.Layout mode")),1)]),_:1}),m("div",Ft,[n(E,{class:"layout-mode-box-style-row",gutter:10},{default:a(()=>[n(z,{span:12},{default:a(()=>[m("div",{onClick:l[0]||(l[0]=T=>g("Default")),class:q(["layout-mode-style default",e(o).layout.layoutMode=="Default"?"active":""])},[zt,m("div",Lt,x(e(t)("layouts.default")),1)],2)]),_:1}),n(z,{span:12},{default:a(()=>[m("div",{onClick:l[1]||(l[1]=T=>g("Classic")),class:q(["layout-mode-style classic",e(o).layout.layoutMode=="Classic"?"active":""])},[Dt,m("div",Et,x(e(t)("layouts.classic")),1)],2)]),_:1})]),_:1}),n(E,{gutter:10},{default:a(()=>[n(z,{span:12},{default:a(()=>[m("div",{onClick:l[2]||(l[2]=T=>g("Streamline")),class:q(["layout-mode-style streamline",e(o).layout.layoutMode=="Streamline"?"active":""])},[Nt,m("div",Pt,x(e(t)("layouts.Single column")),1)],2)]),_:1}),n(z,{span:12},{default:a(()=>[m("div",{onClick:l[3]||(l[3]=T=>g("Double")),class:q(["layout-mode-style double",e(o).layout.layoutMode=="Double"?"active":""])},[qt,m("div",Wt,x(e(t)("layouts.Double column")),1)],2)]),_:1})]),_:1})]),n(s,{"border-style":"dashed"},{default:a(()=>[A(x(e(t)("layouts.overall situation")),1)]),_:1}),m("div",Ut,[n($,{label:e(t)("layouts.Background page switching animation")},{default:a(()=>[n(w,{onChange:l[4]||(l[4]=T=>d(T,"mainAnimation")),"model-value":e(o).layout.mainAnimation,placeholder:e(t)("layouts.Please select an animation name")},{default:a(()=>[n(V,{label:"slide-right",value:"slide-right"}),n(V,{label:"slide-left",value:"slide-left"}),n(V,{label:"el-fade-in-linear",value:"el-fade-in-linear"}),n(V,{label:"el-fade-in",value:"el-fade-in"}),n(V,{label:"el-zoom-in-center",value:"el-zoom-in-center"}),n(V,{label:"el-zoom-in-top",value:"el-zoom-in-top"}),n(V,{label:"el-zoom-in-bottom",value:"el-zoom-in-bottom"})]),_:1},8,["model-value","placeholder"])]),_:1},8,["label"])]),n(s,{"border-style":"dashed"},{default:a(()=>[A(x(e(t)("layouts.sidebar")),1)]),_:1}),m("div",Ht,[n($,{label:e(t)("layouts.Side menu bar background color")},{default:a(()=>[n(I,{onChange:l[5]||(l[5]=T=>b(T,"menuBackground")),"model-value":e(o).getColorVal("menuBackground")},null,8,["model-value"])]),_:1},8,["label"]),n($,{label:e(t)("layouts.Side menu text color")},{default:a(()=>[n(I,{onChange:l[6]||(l[6]=T=>b(T,"menuColor")),"model-value":e(o).getColorVal("menuColor")},null,8,["model-value"])]),_:1},8,["label"]),n($,{label:e(t)("layouts.Side menu active item background color")},{default:a(()=>[n(I,{onChange:l[7]||(l[7]=T=>b(T,"menuActiveBackground")),"model-value":e(o).getColorVal("menuActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),n($,{label:e(t)("layouts.Side menu active item text color")},{default:a(()=>[n(I,{onChange:l[8]||(l[8]=T=>b(T,"menuActiveColor")),"model-value":e(o).getColorVal("menuActiveColor")},null,8,["model-value"])]),_:1},8,["label"]),n($,{label:e(t)("layouts.Show side menu top bar (logo bar)")},{default:a(()=>[n(v,{onChange:l[9]||(l[9]=T=>d(T,"menuShowTopBar")),"model-value":e(o).layout.menuShowTopBar},null,8,["model-value"])]),_:1},8,["label"]),n($,{label:e(t)("layouts.Side menu top bar background color")},{default:a(()=>[n(I,{onChange:l[10]||(l[10]=T=>b(T,"menuTopBarBackground")),"model-value":e(o).getColorVal("menuTopBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),n($,{label:e(t)("layouts.Side menu width (when expanded)")},{default:a(()=>[n(S,{onInput:l[11]||(l[11]=T=>d(T,"menuWidth")),type:"number",step:10,"model-value":e(o).layout.menuWidth},{append:a(()=>[A("px")]),_:1},8,["model-value"])]),_:1},8,["label"]),n($,{label:e(t)("layouts.Side menu default icon")},{default:a(()=>[n(pt,{onChange:l[12]||(l[12]=T=>k(T,"menuDefaultIcon")),"model-value":e(o).layout.menuDefaultIcon},null,8,["model-value"])]),_:1},8,["label"]),n($,{label:e(t)("layouts.Side menu horizontal collapse")},{default:a(()=>[n(v,{onChange:l[13]||(l[13]=T=>d(T,"menuCollapse")),"model-value":e(o).layout.menuCollapse},null,8,["model-value"])]),_:1},8,["label"]),n($,{label:e(t)("layouts.Side menu accordion")},{default:a(()=>[n(v,{onChange:l[14]||(l[14]=T=>d(T,"menuUniqueOpened")),"model-value":e(o).layout.menuUniqueOpened},null,8,["model-value"])]),_:1},8,["label"])]),n(s,{"border-style":"dashed"},{default:a(()=>[A(x(e(t)("layouts.Top bar")),1)]),_:1}),m("div",Ot,[n($,{label:e(t)("layouts.Top bar background color")},{default:a(()=>[n(I,{onChange:l[15]||(l[15]=T=>b(T,"headerBarBackground")),"model-value":e(o).getColorVal("headerBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),n($,{label:e(t)("layouts.Top bar text color")},{default:a(()=>[n(I,{onChange:l[16]||(l[16]=T=>b(T,"headerBarTabColor")),"model-value":e(o).getColorVal("headerBarTabColor")},null,8,["model-value"])]),_:1},8,["label"]),n($,{label:e(t)("layouts.Background color when hovering over the top bar")},{default:a(()=>[n(I,{onChange:l[17]||(l[17]=T=>b(T,"headerBarHoverBackground")),"model-value":e(o).getColorVal("headerBarHoverBackground")},null,8,["model-value"])]),_:1},8,["label"]),n($,{label:e(t)("layouts.Top bar menu active item background color")},{default:a(()=>[n(I,{onChange:l[18]||(l[18]=T=>b(T,"headerBarTabActiveBackground")),"model-value":e(o).getColorVal("headerBarTabActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),n($,{label:e(t)("layouts.Top bar menu active item text color")},{default:a(()=>[n(I,{onChange:l[19]||(l[19]=T=>b(T,"headerBarTabActiveColor")),"model-value":e(o).getColorVal("headerBarTabActiveColor")},null,8,["model-value"])]),_:1},8,["label"])]),n(H,{onConfirm:p,title:e(t)("layouts.Are you sure you want to restore all configurations to the default values?")},{reference:a(()=>[m("div",Kt,[n(M,{class:"w80",type:"info"},{default:a(()=>[A(x(e(t)("layouts.Restore default")),1)]),_:1})])]),_:1},8,["title"])])]),_:1},8,["model"])]),_:1})]),_:1},8,["model-value","title"])])}}});const Jt=D(jt,[["__scopeId","data-v-e049124d"]]),Xt={class:"command"},Yt={class:"task-opt"},Gt=["onClick"],Zt={class:"indent-2"},Qt={class:"package-manager-dialog-footer"},eo={class:"config-buttons"},to=R({__name:"index",setup(y){const{t}=xe(),o=we(),c=j({terminalWarning:"",port:o.state.port,menuExpand:document.documentElement.clientWidth>1840}),u=Q(()=>{let l=o.state.port==""?"80":o.state.port;return l=="8000"?"php think run":"php think run -p "+l}),d=Q(()=>{let l=o.state.port==""?"":":"+o.state.port;return"http://localhost"+l+" "+t("terminal.or")+" http://"+t("terminal.Site domain name")+l}),b=l=>{Ae({port:l}).then(s=>{s.code==1?(o.changePort(l),f()):c.port=o.state.port}).catch(()=>{c.port=o.state.port})},g=l=>{let s=t("terminal.unknown"),z="info";switch(l){case N.Waiting:s=t("terminal.Waiting for execution"),z="info";break;case N.Connecting:s=t("terminal.Connecting"),z="warning";break;case N.Executing:s=t("terminal.Executing"),z="warning";break;case N.Success:s=t("terminal.Successful execution"),z="success";break;case N.Failed:s=t("terminal.Execution failed"),z="danger";break;case N.Unknown:s=t("terminal.Unknown execution result"),z="danger";break}return{statusText:s,statusType:z}},k=()=>{tt.confirm(t("terminal.Are you sure you want to republish?"),t("Reminder"),{confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),type:"warning"}).then(()=>{o.addTaskPM("web-build")})},r=l=>{Ae({manager:l}).then(s=>{s.code==1&&o.changePackageManager(l)}),o.togglePackageManagerDialog(!1)},p=l=>{c.terminalWarning=l},f=()=>{ot()!=o.state.port?p(t("terminal.The current terminal is not running under the installation service, and some commands may not be executed")):p("")};return qe(()=>o.state.port,l=>{l!=c.port&&(c.port=l,f())}),X(()=>{f()}),(l,s)=>{const z=_("el-alert"),E=_("el-tag"),V=_("el-button"),w=_("Icon"),$=_("el-card"),I=_("el-timeline-item"),v=_("el-timeline"),S=_("el-empty"),M=_("el-button-group"),H=_("el-dialog"),oe=_("el-form"),P=Te("blur");return i(),B(L,null,[n(H,et(l.$attrs,{modelValue:e(o).state.show,"onUpdate:modelValue":s[7]||(s[7]=h=>e(o).state.show=h),title:e(t)("terminal.Terminal"),class:"ba-terminal-dialog","append-to-body":!0}),{default:a(()=>[c.terminalWarning?(i(),C(z,{key:0,class:"terminal-warning-alert",title:c.terminalWarning,type:"error"},null,8,["title"])):F("",!0),e(o).state.taskList.length?(i(),C(v,{key:1},{default:a(()=>[(i(!0),B(L,null,G(e(o).state.taskList,(h,T)=>(i(),C(I,{key:T,class:q(["task-item","task-status-"+h.status]),type:g(h.status).statusType,center:"",timestamp:h.createtime,placement:"top"},{default:a(()=>[n($,null,{default:a(()=>[m("div",null,[n(E,{type:g(h.status).statusType},{default:a(()=>[A(x(g(h.status).statusText),1)]),_:2},1032,["type"]),(h.status==e(N).Failed||h.status==e(N).Unknown)&&h.blockOnFailure?(i(),C(E,{key:0,class:"block-on-failure-tag",type:"warning"},{default:a(()=>[A(x(e(t)("terminal.Failure to execute this command will block the execution of the queue")),1)]),_:1})):F("",!0),h.status==e(N).Executing||h.status==e(N).Connecting?(i(),C(E,{key:1,class:"block-on-failure-tag",type:"danger"},{default:a(()=>[A(x(e(t)("terminal.Do not refresh the browser")),1)]),_:1})):F("",!0),m("span",Xt,x(h.command),1),m("div",Yt,[h.status==e(N).Failed||h.status==e(N).Unknown?K((i(),C(V,{key:0,title:e(t)("Retry"),size:"small",type:"warning",icon:"el-icon-RefreshRight",circle:"",onClick:ue=>e(o).retryTask(T)},null,8,["title","onClick"])),[[P]]):F("",!0),K(n(V,{onClick:ue=>e(o).delTask(T),title:e(t)("delete"),size:"small",type:"danger",icon:"el-icon-Delete",circle:""},null,8,["onClick","title"]),[[P]])])]),h.status!=e(N).Waiting?(i(),B(L,{key:0},[h.status!=e(N).Connecting&&h.status!=e(N).Executing?(i(),B("div",{key:0,onClick:ue=>e(o).setTaskShowMessage(T),class:"toggle-message-display"},[m("span",null,x(e(t)("terminal.Command run log")),1),n(w,{name:h.showMessage?"el-icon-ArrowUp":"el-icon-ArrowDown",size:"16",color:"#909399"},null,8,["name"])],8,Gt)):F("",!0),h.status==e(N).Connecting||h.status==e(N).Executing||h.status>e(N).Executing&&h.showMessage?(i(),B("div",{key:1,class:q(["exec-message","exec-message-"+h.uuid])},[(i(!0),B(L,null,G(h.message,(ue,Xe)=>(i(),B("div",{key:Xe,class:"message-item"},x(ue),1))),128))],2)):F("",!0)],64)):F("",!0)]),_:2},1024)]),_:2},1032,["class","type","timestamp"]))),128))]),_:1})):(i(),C(S,{key:2,"image-size":80,description:e(t)("terminal.No mission yet")},null,8,["description"])),n(M,null,{default:a(()=>[K((i(),C(V,{class:"terminal-menu-item",icon:"el-icon-MagicStick",onClick:s[0]||(s[0]=h=>e(o).addTaskPM("test",!1))},{default:a(()=>[A(x(e(t)("terminal.Test command")),1)]),_:1})),[[P]]),K((i(),C(V,{class:"terminal-menu-item",icon:"el-icon-Download",onClick:s[1]||(s[1]=h=>e(o).addTaskPM("web-install"))},{default:a(()=>[A(x(e(t)("terminal.Install dependent packages")),1)]),_:1})),[[P]]),K((i(),C(V,{class:"terminal-menu-item",icon:"el-icon-Sell",onClick:s[2]||(s[2]=h=>k())},{default:a(()=>[A(x(e(t)("terminal.Republish")),1)]),_:1})),[[P]]),c.menuExpand?(i(),B(L,{key:1},[K((i(),C(V,{class:"terminal-menu-item",icon:"el-icon-Delete",onClick:s[4]||(s[4]=h=>e(o).clearSuccessTask())},{default:a(()=>[A(x(e(t)("terminal.Clean up task list")),1)]),_:1})),[[P]]),K((i(),C(V,{class:"terminal-menu-item",icon:"el-icon-Switch",onClick:s[5]||(s[5]=h=>e(o).togglePackageManagerDialog(!0))},{default:a(()=>[A(x(e(t)("terminal.Package manager"))+" "+x(e(o).state.packageManager.toUpperCase()),1)]),_:1})),[[P]]),K((i(),C(V,{class:"terminal-menu-item",icon:"el-icon-Tools",onClick:s[6]||(s[6]=h=>e(o).toggleConfigDialog())},{default:a(()=>[A(x(e(t)("terminal.Terminal settings")),1)]),_:1})),[[P]])],64)):K((i(),C(V,{key:0,class:"terminal-menu-item",icon:"el-icon-Expand",onClick:s[3]||(s[3]=h=>c.menuExpand=!0)},null,512)),[[P]])]),_:1})]),_:1},16,["modelValue","title"]),n(H,{onClose:s[14]||(s[14]=h=>e(o).togglePackageManagerDialog(!1)),"model-value":e(o).state.showPackageManagerDialog,class:"ba-terminal-dialog",title:e(t)("terminal.Please select package manager"),center:""},{footer:a(()=>[m("div",Qt,[n(V,{onClick:s[8]||(s[8]=h=>r("npm"))},{default:a(()=>[A("npm")]),_:1}),n(V,{onClick:s[9]||(s[9]=h=>r("cnpm"))},{default:a(()=>[A("cnpm")]),_:1}),n(V,{onClick:s[10]||(s[10]=h=>r("pnpm"))},{default:a(()=>[A("pnpm")]),_:1}),n(V,{onClick:s[11]||(s[11]=h=>r("yarn"))},{default:a(()=>[A("yarn")]),_:1}),n(V,{onClick:s[12]||(s[12]=h=>r("ni"))},{default:a(()=>[A("ni")]),_:1}),n(V,{onClick:s[13]||(s[13]=h=>r("none"))},{default:a(()=>[A(x(e(t)("terminal.I want to execute the command manually")),1)]),_:1})])]),default:a(()=>[m("div",Zt,x(e(t)("terminal.Switch package manager title")),1)]),_:1},8,["model-value","title"]),n(H,{onClose:s[19]||(s[19]=h=>e(o).toggleConfigDialog(!1)),"model-value":e(o).state.showConfig,class:"ba-terminal-dialog",title:e(t)("terminal.Terminal settings")},{default:a(()=>[n(oe,{"label-position":"top"},{default:a(()=>[n(ie,{label:e(t)("terminal.Install service port"),modelValue:c.port,"onUpdate:modelValue":s[15]||(s[15]=h=>c.port=h),type:"number","input-attr":{onChange:b},placeholder:e(t)("terminal.The port number to start the installation service (this port needs to be opened for external network access)")},null,8,["label","modelValue","input-attr","placeholder"]),n(ie,{label:e(t)("terminal.Installation service startup command"),modelValue:e(u),"onUpdate:modelValue":s[16]||(s[16]=h=>Ie(u)?u.value=h:null),type:"string","input-attr":{disabled:!0},attr:{"block-help":e(t)("terminal.Please execute this command to start the service (add Su under Linux)")}},null,8,["label","modelValue","attr"]),n(ie,{label:e(t)("terminal.Installation service URL"),modelValue:e(d),"onUpdate:modelValue":s[17]||(s[17]=h=>Ie(d)?d.value=h:null),type:"string","input-attr":{disabled:!0},attr:{"block-help":e(t)("terminal.Please access the site through the installation service URL (except in debug mode)")}},null,8,["label","modelValue","attr"])]),_:1}),n(ie,{label:e(t)("terminal.Clean up successful tasks when starting a new task"),"model-value":e(o).state.automaticCleanupTask,type:"radio",data:{content:{0:e(t)("Disable"),1:e(t)("Enable")},childrenAttr:{border:!0}},"input-attr":{onChange:e(o).changeAutomaticCleanupTask}},null,8,["label","model-value","data","input-attr"]),m("div",eo,[n(V,{onClick:s[18]||(s[18]=h=>e(o).toggleConfigDialog(!1))},{default:a(()=>[A(x(e(t)("terminal.Back to terminal")),1)]),_:1})])]),_:1},8,["model-value","title"])],64)}}});const oo=D(to,[["__scopeId","data-v-52020094"]]),no={class:"nav-menu-item"},lo=["src"],ao={class:"admin-name"},so={class:"admin-info-base"},ro=["src"],co={class:"admin-info-other"},uo={class:"admin-info-name"},io={class:"admin-info-lasttime"},mo={class:"admin-info-footer"},_o=R({__name:"navMenus",setup(y){J(f=>({d45338c0:e(c).getColorVal("headerBarBackground"),"1d0a0a00":e(c).getColorVal("headerBarTabColor"),"38491e86":e(c).getColorVal("headerBarHoverBackground")}));const{t}=xe(),o=We(),c=W(),u=we(),d=j({isFullScreen:!1,currentNavMenu:"",showLayoutDrawer:!1}),b=(f,l)=>{d.currentNavMenu=f?l:""},g=()=>{if(!de.isEnabled)return nt.warning(t("layouts.Full screen is not supported")),!1;de.toggle(),de.onchange(()=>{d.isFullScreen=de.isFullscreen})},k=()=>{_e({name:"routine/adminInfo"})},r=()=>{ft().then(()=>{Z.remove(he),Ue.go(0)})},p=f=>{if(f=="storage"||f=="all"){const l=Z.get(he),s=Z.get(Re);if(le.clear(),Z.clear(),Z.set(he,l),Z.set(Re,s),f=="storage")return}lt(f).then(()=>{})};return(f,l)=>{const s=_("Icon"),z=_("router-link"),E=_("el-dropdown-item"),V=_("el-dropdown-menu"),w=_("el-dropdown"),$=_("el-badge"),I=_("el-avatar"),v=_("el-button"),S=_("el-popover");return i(),B("div",{class:q(["nav-menus",e(c).layout.layoutMode])},[n(z,{class:"h100",target:"_blank",title:e(t)("Home"),to:"/"},{default:a(()=>[m("div",no,[n(s,{color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Monitor",size:"18"},null,8,["color"])])]),_:1},8,["title"]),n(w,{onVisibleChange:l[0]||(l[0]=M=>b(M,"lang")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:a(()=>[n(V,{class:"dropdown-menu-box"},{default:a(()=>[(i(!0),B(L,null,G(e(c).lang.langArray,M=>(i(),C(E,{key:M.name,onClick:H=>e(at)(M.name)},{default:a(()=>[A(x(M.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:a(()=>[m("div",{class:q(["nav-menu-item pt2",d.currentNavMenu=="lang"?"hover":""])},[n(s,{color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-lang",size:"18"},null,8,["color"])],2)]),_:1}),m("div",{onClick:g,class:q(["nav-menu-item",d.isFullScreen?"hover":""])},[d.isFullScreen?(i(),C(s,{key:0,color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-full-screen-cancel",size:"18"},null,8,["color"])):(i(),C(s,{key:1,color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-FullScreen",size:"18"},null,8,["color"]))],2),e(o).super?(i(),B("div",{key:0,onClick:l[1]||(l[1]=M=>e(u).toggle()),class:"nav-menu-item pt2"},[n($,{"is-dot":e(u).state.showDot},{default:a(()=>[n(s,{color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-terminal",size:"26"},null,8,["color"])]),_:1},8,["is-dot"])])):F("",!0),e(o).super?(i(),C(w,{key:1,onVisibleChange:l[5]||(l[5]=M=>b(M,"clear")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:a(()=>[n(V,{class:"dropdown-menu-box"},{default:a(()=>[n(E,{onClick:l[2]||(l[2]=M=>p("tp"))},{default:a(()=>[A(x(e(t)("utils.Clean up system cache")),1)]),_:1}),n(E,{onClick:l[3]||(l[3]=M=>p("storage"))},{default:a(()=>[A(x(e(t)("utils.Clean up browser cache")),1)]),_:1}),n(E,{onClick:l[4]||(l[4]=M=>p("all")),divided:""},{default:a(()=>[A(x(e(t)("utils.Clean up all cache")),1)]),_:1})]),_:1})]),default:a(()=>[m("div",{class:q(["nav-menu-item",d.currentNavMenu=="clear"?"hover":""])},[n(s,{color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Delete",size:"18"},null,8,["color"])],2)]),_:1})):F("",!0),n(S,{onShow:l[6]||(l[6]=M=>b(!0,"adminInfo")),onHide:l[7]||(l[7]=M=>b(!1,"adminInfo")),placement:"bottom-end","hide-after":0,width:260,trigger:"click","popper-class":"admin-info-box"},{reference:a(()=>[m("div",{class:q(["admin-info",d.currentNavMenu=="adminInfo"?"hover":""])},[n(I,{size:25,fit:"fill"},{default:a(()=>[m("img",{src:e(o).avatar,alt:""},null,8,lo)]),_:1}),m("div",ao,x(e(o).nickname),1)],2)]),default:a(()=>[m("div",null,[m("div",so,[n(I,{size:70,fit:"fill"},{default:a(()=>[m("img",{src:e(o).avatar,alt:""},null,8,ro)]),_:1}),m("div",co,[m("div",uo,x(e(o).nickname),1),m("div",io,x(e(o).lastlogintime),1)])]),m("div",mo,[n(v,{onClick:k,type:"primary",plain:""},{default:a(()=>[A(x(e(t)("layouts.personal data")),1)]),_:1}),n(v,{onClick:r,type:"danger",plain:""},{default:a(()=>[A(x(e(t)("layouts.cancellation")),1)]),_:1})])])]),_:1}),m("div",{onClick:l[8]||(l[8]=M=>e(c).setLayout("showDrawer",!0)),class:"nav-menu-item"},[n(s,{color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"fa fa-cogs",size:"18"},null,8,["color"])]),n(Jt),n(oo)],2)}}});const ve=D(_o,[["__scopeId","data-v-e2acf89f"]]),po={class:"nav-bar"},fo=R({__name:"default",setup(y){J(o=>({"341e91f0":e(t).getColorVal("headerBarTabColor"),"7d0afb8a":e(t).getColorVal("headerBarTabActiveColor"),"5eccd556":e(t).getColorVal("headerBarTabActiveBackground")}));const t=W();return(o,c)=>(i(),B("div",po,[n(Je),n(ve)]))}});const vo=D(fo,[["__scopeId","data-v-8d90b156"]]),yo={class:"nav-bar"},go={key:0,class:"unfold"},bo=R({__name:"classic",setup(y){J(c=>({"88b2895c":e(t).getColorVal("headerBarBackground"),"6a10a632":e(t).getColorVal("headerBarTabColor"),d50d5368:e(t).getColorVal("headerBarTabActiveColor"),"4c5473d8":e(t).getColorVal("headerBarHoverBackground"),a7c0b85a:e(t).getColorVal("headerBarTabActiveBackground")}));const t=W(),o=()=>{mt("ba-aside-menu-shade",()=>{t.setLayout("menuCollapse",!0)}),t.setLayout("menuCollapse",!1)};return(c,u)=>{const d=_("Icon");return i(),B("div",yo,[e(t).layout.shrink&&e(t).layout.menuCollapse?(i(),B("div",go,[n(d,{onClick:o,name:"fa fa-indent",color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["color"])])):F("",!0),e(t).layout.shrink?F("",!0):(i(),C(Je,{key:1})),n(ve)])}}});const ho=D(bo,[["__scopeId","data-v-af750839"]]),Co={class:"layouts-menu-horizontal"},ko={key:0,class:"menu-horizontal-logo"},xo=R({__name:"menuHorizontal",setup(y){J(r=>({c2a66510:e(o).getColorVal("headerBarHoverBackground"),"29760f01":e(o).getColorVal("menuBackground"),"07c7b344":e(o).getColorVal("menuColor"),68770578:e(o).getColorVal("menuActiveColor"),"1a6c9027":e(o).getColorVal("menuActiveBackground")}));const t=ae(),o=W(),c=U(),u=te(),d=j({menuKey:me(),defaultActive:""}),b=Q(()=>(d.menuKey=me(),c.state.tabsViewRoutes)),g=r=>{d.defaultActive=r.path},k=()=>{ee(()=>{var p;let r=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!r)return!1;(p=t.value)==null||p.setScrollTop(r.offsetTop)})};return X(()=>{g(u),k()}),ce(r=>{g(r)}),(r,p)=>{const f=_("Icon"),l=_("el-sub-menu"),s=_("el-menu-item"),z=_("el-menu"),E=_("el-scrollbar"),V=Te("blur");return i(),B("div",Co,[e(o).layout.menuShowTopBar?(i(),B("div",ko,[n(Ke)])):F("",!0),n(E,{ref_key:"horizontalMenusRef",ref:t,class:"horizontal-menus-scrollbar"},{default:a(()=>[(i(),C(z,{class:"menu-horizontal",mode:"horizontal","default-active":d.defaultActive,key:d.menuKey},{default:a(()=>[(i(!0),B(L,null,G(e(b),w=>(i(),B(L,null,[w.children&&w.children.length>0?(i(),C(l,{index:w.path,key:w.path},{title:a(()=>{var $,I,v,S;return[n(f,{color:e(o).getColorVal("menuColor"),name:($=w.meta)!=null&&$.icon?(I=w.meta)==null?void 0:I.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),m("span",null,x((v=w.meta)!=null&&v.title?(S=w.meta)==null?void 0:S.title:r.$t("noTitle")),1)]}),default:a(()=>[n(pe,{menus:w.children},null,8,["menus"])]),_:2},1032,["index"])):K((i(),C(s,{index:w.path,key:w.path,onClick:$=>e(Be)(w)},{default:a(()=>{var $,I,v,S;return[n(f,{color:e(o).getColorVal("menuColor"),name:($=w.meta)!=null&&$.icon?(I=w.meta)==null?void 0:I.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),m("span",null,x((v=w.meta)!=null&&v.title?(S=w.meta)==null?void 0:S.title:r.$t("noTitle")),1)]}),_:2},1032,["index","onClick"])),[[V]])],64))),256))]),_:1},8,["default-active"]))]),_:1},512),n(ve)])}}});const wo=D(xo,[["__scopeId","data-v-0db0671c"]]),To={class:"layouts-menu-horizontal-double"},So=R({__name:"double",setup(y){J(r=>({"6855c472":e(o).getColorVal("menuBackground"),ebd71850:e(o).getColorVal("menuColor"),"11f9cf72":e(o).getColorVal("menuActiveColor"),"8a4a1b26":e(o).getColorVal("menuActiveBackground")}));const t=ae(),o=W(),c=U(),u=te(),d=j({menuKey:me(),defaultActive:""}),b=Q(()=>(d.menuKey=me(),c.state.tabsViewRoutes)),g=r=>{$e(r.path,c.state.tabsViewRoutes)&&(d.defaultActive=r.path)},k=()=>{ee(()=>{var p;let r=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!r)return!1;(p=t.value)==null||p.setScrollTop(r.offsetTop)})};return X(()=>{g(u),k()}),ce(r=>{g(r)}),(r,p)=>{const f=_("Icon"),l=_("el-sub-menu"),s=_("el-menu-item"),z=_("el-menu"),E=_("el-scrollbar"),V=Te("blur");return i(),B("div",To,[n(E,{ref_key:"horizontalMenusRef",ref:t,class:"double-menus-scrollbar"},{default:a(()=>[(i(),C(z,{class:"menu-horizontal",mode:"horizontal","default-active":d.defaultActive,key:d.menuKey},{default:a(()=>[(i(!0),B(L,null,G(e(b),w=>(i(),B(L,null,[w.children&&w.children.length>0?(i(),C(l,{index:w.path,key:w.path},{title:a(()=>{var $,I,v,S;return[n(f,{color:e(o).getColorVal("menuColor"),name:($=w.meta)!=null&&$.icon?(I=w.meta)==null?void 0:I.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),m("span",null,x((v=w.meta)!=null&&v.title?(S=w.meta)==null?void 0:S.title:r.$t("noTitle")),1)]}),default:a(()=>[n(pe,{menus:w.children},null,8,["menus"])]),_:2},1032,["index"])):K((i(),C(s,{index:w.path,key:w.path,onClick:$=>e(Be)(w)},{default:a(()=>{var $,I,v,S;return[n(f,{color:e(o).getColorVal("menuColor"),name:($=w.meta)!=null&&$.icon?(I=w.meta)==null?void 0:I.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),m("span",null,x((v=w.meta)!=null&&v.title?(S=w.meta)==null?void 0:S.title:r.$t("noTitle")),1)]}),_:2},1032,["index","onClick"])),[[V]])],64))),256))]),_:1},8,["default-active"]))]),_:1},512),n(ve)])}}});const Bo=D(So,[["__scopeId","data-v-e13c3343"]]),$o=R({name:"layout/header",components:{DefaultNavBar:vo,ClassicNavBar:ho,StreamlineNavBar:wo,DoubleNavBar:Bo}}),Vo=R({...$o,setup(y){const t=W(),o=U();return(c,u)=>{const d=_("el-header");return e(o).state.tabFullScreen?F("",!0):(i(),C(d,{key:0,class:"layout-header"},{default:a(()=>[(i(),C(Se(e(t).layout.layoutMode+"NavBar")))]),_:1}))}}});const ye=D(Vo,[["__scopeId","data-v-854c4aa8"]]),Mo=R({name:"layout/main"}),Io=R({...Mo,setup(y){const{proxy:t}=je(),o=te(),c=W(),u=U(),d=j({componentKey:o.path,keepAliveComponentNameList:[]}),b=function(g){if(g){if(d.keepAliveComponentNameList.find(r=>r===g))return;d.keepAliveComponentNameList.push(g)}};return He(()=>{t.eventBus.on("onTabViewRefresh",g=>{d.keepAliveComponentNameList=d.keepAliveComponentNameList.filter(k=>g.meta.keepalive!==k),d.componentKey="",ee(()=>{d.componentKey=g.path,b(g.meta.keepalive)})}),t.eventBus.on("onTabViewClose",g=>{d.keepAliveComponentNameList=d.keepAliveComponentNameList.filter(k=>g.meta.keepalive!==k)})}),st(()=>{t.eventBus.off("onTabViewRefresh"),t.eventBus.off("onTabViewClose")}),X(()=>{var g,k;typeof((g=u.state.activeRoute)==null?void 0:g.meta.keepalive)=="string"&&b((k=u.state.activeRoute)==null?void 0:k.meta.keepalive)}),qe(()=>o.path,()=>{var g,k;d.componentKey=o.path,typeof((g=u.state.activeRoute)==null?void 0:g.meta.keepalive)=="string"&&b((k=u.state.activeRoute)==null?void 0:k.meta.keepalive)}),(g,k)=>{const r=_("router-view"),p=_("el-scrollbar"),f=_("el-main");return i(),C(f,{class:"layout-main"},{default:a(()=>[n(p,{class:"layout-main-scrollbar",style:ne(e(yt)()),ref:"mainScrollbarRef"},{default:a(()=>[n(r,null,{default:a(({Component:l})=>[n(ke,{name:e(c).layout.mainAnimation,mode:"out-in"},{default:a(()=>[(i(),C(rt,{include:d.keepAliveComponentNameList},[(i(),C(Se(l),{key:d.componentKey}))],1032,["include"]))]),_:2},1032,["name"])]),_:1})]),_:1},8,["style"])]),_:1})}}});const ge=D(Io,[["__scopeId","data-v-1af00f4e"]]),Ao=y=>(Ne("data-v-0aa634f1"),y=y(),Pe(),y),Ro=["title","onMouseover","onMouseout"],Fo=["onClick"],zo=Ao(()=>m("div",{class:"close-full-screen-on"},null,-1)),Lo=R({__name:"closeFullScreen",setup(y){const t=U(),o=j({closeBoxTop:20});X(()=>{setTimeout(()=>{o.closeBoxTop=-30},300)});const c=()=>{o.closeBoxTop=20},u=()=>{o.closeBoxTop=-30},d=()=>{t.setFullScreen(!1)};return(b,g)=>{const k=_("Icon");return i(),B("div",{title:b.$t("layouts.Exit full screen"),onMouseover:se(c,["stop"]),onMouseout:se(u,["stop"])},[m("div",{onClick:se(d,["stop"]),class:"close-full-screen",style:ne({top:o.closeBoxTop+"px"})},[n(k,{name:"el-icon-Close"})],12,Fo),zo],40,Ro)}}});const be=D(Lo,[["__scopeId","data-v-0aa634f1"]]),Do=R({__name:"default",setup(y){const t=U();return(o,c)=>{const u=_("el-container");return i(),B(L,null,[n(u,{class:"layout-container"},{default:a(()=>[n(Ve),n(u,{class:"content-wrapper"},{default:a(()=>[n(ye),n(ge)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),C(be,{key:0})):F("",!0)],64)}}});const Eo=D(Do,[["__scopeId","data-v-59d252c1"]]),No=R({__name:"classic",setup(y){const t=U();return(o,c)=>{const u=_("el-container");return i(),B(L,null,[n(u,{class:"layout-container"},{default:a(()=>[n(Ve),n(u,{class:"content-wrapper"},{default:a(()=>[n(ye),n(ge)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),C(be,{key:0})):F("",!0)],64)}}});const Po=D(No,[["__scopeId","data-v-fb349671"]]),qo=R({__name:"streamline",setup(y){const t=U();return(o,c)=>{const u=_("el-container");return i(),B(L,null,[n(u,{class:"layout-container"},{default:a(()=>[n(u,{class:"content-wrapper"},{default:a(()=>[n(ye),n(ge)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),C(be,{key:0})):F("",!0)],64)}}});const Wo=D(qo,[["__scopeId","data-v-fcdc1bd3"]]),Uo=R({__name:"double",setup(y){const t=U();return(o,c)=>{const u=_("el-container");return i(),B(L,null,[n(u,{class:"layout-container"},{default:a(()=>[n(Ve),n(u,{class:"content-wrapper"},{default:a(()=>[n(ye),n(ge)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),C(be,{key:0})):F("",!0)],64)}}});const Ho=D(Uo,[["__scopeId","data-v-d08319bd"]]),Oo={components:{Default:Eo,Classic:Po,Streamline:Wo,Double:Ho}},on=R({...Oo,__name:"index",setup(y){const t=we(),o=U(),c=W(),u=te(),d=Le(),b=We();X(()=>{if(!b.token)return Ue.push({name:"adminLogin"});g(),r(),Ce(window,"resize",r)}),He(()=>{k(),Ce(window,"resize",k)});const g=()=>{vt().then(p=>{if(d.dataFill(p.data.siteConfig),t.changePort(p.data.terminal.installServicePort),t.changePackageManager(p.data.terminal.npmPackageManager),b.dataFill(p.data.adminInfo),p.data.menus){if(_t(p.data.menus),u.params.to){const l=JSON.parse(u.params.to);if(l.path!=ct.path){let s=ut(l.query)?{}:l.query;_e({path:l.path,query:s});return}}let f=Oe(o.state.tabsViewRoutes);f&&_e(f.path)}})},k=()=>{let p={layoutMode:c.layout.layoutMode,menuCollapse:c.layout.menuCollapse},f=le.get(re);if(f||le.set(re,p),document.body.clientWidth<1024)c.setLayout("menuCollapse",!0),c.setLayout("shrink",!0),c.setLayoutMode("Classic");else{let s=f||p;c.setLayout("menuCollapse",s.menuCollapse),c.setLayout("shrink",!1),c.setLayoutMode(s.layoutMode)}},r=()=>{const p=document.querySelector(".nav-tabs");if(!p)return;const f=document.querySelector(".nav-bar"),l=document.querySelector(".nav-menus"),s=f.offsetWidth-(l.offsetWidth+20);p.style.width=s.toString()+"px"};return(p,f)=>(i(),C(Se(e(c).layout.layoutMode)))}});export{on as default};
