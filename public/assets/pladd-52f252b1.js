import{d as N,r as h,X as A,o as L,l as b,H as y,t as S,f as _,Y as g,b as s,g as T,a as t,h as m,j as o,z as $,A as j,c as D,J as G,F as H,L as c,e as n,_ as I}from"./index-9250cf41.js";const J={class:"dialog-footer"},M=N({__name:"pladd",emits:["init"],setup(P,{expose:x,emit:w}){let a=h({sform:{type:"custom",product_id:0,addnum:0,day:0,num:0},product:[]});A(()=>{a.sform.type=="vip"&&a.sform.product_id!=0&&a.product.forEach(r=>{r.id==a.sform.product_id&&(a.sform.day=r.expire,a.sform.num=r.num)})}),L(()=>{b({url:"/admin/product/index",method:"GET",params:{}}).then(e=>{e.code==1&&(a.product=e.data.list)})});let i=y(!1);const p=y(i);x({isshow:i});let k=async()=>{if(a.sform.addnum<=0||a.sform.day<=0||a.sform.num<=0)return c.error("表单填写不正确,请检查"),!1;if(a.sform.type=="vip"&&a.sform.product_id==0)return c.error("产品套餐需要选择"),!1;(await b({url:"/admin/carmi/pladd",method:"post",data:a.sform})).code==1&&(c.success("添加成功"),w("init"),i.value=!1)},{sform:d,product:U}=S(a);return(r,e)=>{const v=n("el-radio"),C=n("el-radio-group"),u=n("el-form-item"),z=n("el-option"),B=n("el-select"),f=n("el-input"),E=n("el-form"),V=n("el-button"),F=n("el-dialog");return _(),g(F,{modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=l=>p.value=l),title:"批量添加卡密",width:"50%"},{footer:s(()=>[T("span",J,[t(V,{onClick:e[5]||(e[5]=l=>p.value=!1)},{default:s(()=>[m("取消")]),_:1}),t(V,{type:"primary",onClick:e[6]||(e[6]=l=>o(k)())},{default:s(()=>[m(" 确定 ")]),_:1})])]),default:s(()=>[t(E,{model:o(d),"label-width":"120px"},{default:s(()=>[t(u,{label:"卡密类型"},{default:s(()=>[t(C,{modelValue:o(d).type,"onUpdate:modelValue":e[0]||(e[0]=l=>o(d).type=l),class:"ml-4"},{default:s(()=>[t(v,{label:"custom",size:""},{default:s(()=>[m("普通卡密")]),_:1}),t(v,{label:"vip",size:""},{default:s(()=>[m("套餐卡密")]),_:1})]),_:1},8,["modelValue"])]),_:1}),$(t(u,{label:"产品套餐"},{default:s(()=>[t(B,{modelValue:o(d).product_id,"onUpdate:modelValue":e[1]||(e[1]=l=>o(d).product_id=l),class:"m-2",placeholder:"Select",size:""},{default:s(()=>[(_(!0),D(H,null,G(o(U),l=>(_(),g(z,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},512),[[j,o(d).type=="vip"]]),t(u,{label:"生成卡密数量"},{default:s(()=>[t(f,{modelValue:o(d).addnum,"onUpdate:modelValue":e[2]||(e[2]=l=>o(d).addnum=l),placeholder:"请输入数量"},null,8,["modelValue"])]),_:1}),t(u,{label:"有效天数"},{default:s(()=>[t(f,{disabled:o(d).type=="vip",modelValue:o(d).day,"onUpdate:modelValue":e[3]||(e[3]=l=>o(d).day=l),placeholder:"请输入有效天数"},null,8,["disabled","modelValue"])]),_:1}),t(u,{label:"可用聊天次数"},{default:s(()=>[t(f,{disabled:o(d).type=="vip",modelValue:o(d).num,"onUpdate:modelValue":e[4]||(e[4]=l=>o(d).num=l),placeholder:"请输入聊天次数"},null,8,["disabled","modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}});const X=I(M,[["__scopeId","data-v-d9b9c3a2"]]);export{X as default};
