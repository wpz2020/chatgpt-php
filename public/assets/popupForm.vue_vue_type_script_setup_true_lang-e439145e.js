import{defineComponent as U,ref as F,inject as z,reactive as D,resolveComponent as s,resolveDirective as p,openBlock as d,createBlock as u,unref as e,withCtx as m,withDirectives as f,createElementBlock as I,createTextVNode as b,toDisplayString as y,createElementVNode as v,normalizeStyle as V,createVNode as r,normalizeClass as N,withModifiers as B,withKeys as M,vShow as T,createCommentVNode as W}from"vue";import{useI18n as $}from"vue-i18n";import{F as i}from"./index-39d73c69.js";import{b as n}from"./validate-e09b6b50.js";const E={class:"title"},G=U({__name:"popupForm",setup(K){const c=F(),t=z("baTable"),{t:l}=$(),g=D({num:[n({name:"number",title:l("carmi.num")})],day:[n({name:"number",title:l("carmi.day")})],download:[n({name:"number",title:l("carmi.download")})],create_time:[n({name:"date",title:l("carmi.create_time")})],update_time:[n({name:"number",title:l("carmi.update_time")})]});return(R,o)=>{const k=s("el-form"),w=s("el-scrollbar"),_=s("el-button"),h=s("el-dialog"),x=p("drag"),C=p("zoom"),S=p("loading"),P=p("blur");return d(),u(h,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":["add","edit"].includes(e(t).form.operate),onClose:e(t).toggleForm,width:"50%"},{header:m(()=>[f((d(),I("div",E,[b(y(e(t).form.operate?e(l)(e(t).form.operate):""),1)])),[[x,[".ba-operate-dialog",".el-dialog__header"]],[C,".ba-operate-dialog"]])]),footer:m(()=>[v("div",{style:V("width: calc(100% - "+e(t).form.labelWidth/1.8+"px)")},[r(_,{onClick:o[9]||(o[9]=a=>e(t).toggleForm(""))},{default:m(()=>[b(y(e(l)("Cancel")),1)]),_:1}),f((d(),u(_,{loading:e(t).form.submitLoading,onClick:o[10]||(o[10]=a=>e(t).onSubmit(c.value)),type:"primary"},{default:m(()=>[b(y(e(t).form.operateIds&&e(t).form.operateIds.length>1?e(l)("Save and edit next item"):e(l)("Save")),1)]),_:1},8,["loading"])),[[P]])],4)]),default:m(()=>[f((d(),u(w,{class:"ba-table-form-scrollbar"},{default:m(()=>[v("div",{class:N(["ba-operate-form","ba-"+e(t).form.operate+"-form"]),style:V("width: calc(100% - "+e(t).form.labelWidth/2+"px)")},[e(t).form.loading?W("",!0):(d(),u(k,{key:0,ref_key:"formRef",ref:c,onSubmit:o[7]||(o[7]=B(()=>{},["prevent"])),onKeyup:o[8]||(o[8]=M(a=>e(t).onSubmit(c.value),["enter"])),model:e(t).form.items,"label-position":"right","label-width":e(t).form.labelWidth+"px",rules:g},{default:m(()=>[r(i,{label:e(l)("carmi.key"),type:"string",modelValue:e(t).form.items.key,"onUpdate:modelValue":o[0]||(o[0]=a=>e(t).form.items.key=a),prop:"key",placeholder:e(l)("Please input field",{field:e(l)("carmi.key")})},null,8,["label","modelValue","placeholder"]),r(i,{label:e(l)("carmi.num"),type:"number",prop:"num","input-attr":{step:1},modelValue:e(t).form.items.num,"onUpdate:modelValue":o[1]||(o[1]=a=>e(t).form.items.num=a),modelModifiers:{number:!0},placeholder:e(l)("Please input field",{field:e(l)("carmi.num")})},null,8,["label","modelValue","placeholder"]),r(i,{label:e(l)("carmi.day"),type:"number",prop:"day","input-attr":{step:1},modelValue:e(t).form.items.day,"onUpdate:modelValue":o[2]||(o[2]=a=>e(t).form.items.day=a),modelModifiers:{number:!0},placeholder:e(l)("Please input field",{field:e(l)("carmi.day")})},null,8,["label","modelValue","placeholder"]),r(i,{label:e(l)("carmi.status"),type:"select",modelValue:e(t).form.items.status,"onUpdate:modelValue":o[3]||(o[3]=a=>e(t).form.items.status=a),prop:"status",data:{content:{0:e(l)("carmi.status 0"),1:e(l)("carmi.status 1")}},placeholder:e(l)("Please select field",{field:e(l)("carmi.status")})},null,8,["label","modelValue","data","placeholder"]),r(i,{label:e(l)("carmi.user_id"),type:"remoteSelect",modelValue:e(t).form.items.user_id,"onUpdate:modelValue":o[4]||(o[4]=a=>e(t).form.items.user_id=a),prop:"user_id","input-attr":{pk:"user.id",field:"username","remote-url":"/admin/user.User/index"},placeholder:e(l)("Please select field",{field:e(l)("carmi.user_id")})},null,8,["label","modelValue","input-attr","placeholder"]),r(i,{label:e(l)("carmi.type"),type:"radio",modelValue:e(t).form.items.type,"onUpdate:modelValue":o[5]||(o[5]=a=>e(t).form.items.type=a),prop:"type",data:{content:{custom:e(l)("carmi.type custom"),vip:e(l)("carmi.type vip")}},placeholder:e(l)("Please select field",{field:e(l)("carmi.type")})},null,8,["label","modelValue","data","placeholder"]),f(r(i,{label:"产品套餐",type:"remoteSelect",modelValue:e(t).form.items.product_id,"onUpdate:modelValue":o[6]||(o[6]=a=>e(t).form.items.product_id=a),prop:"product_id","input-attr":{pk:"product.id",field:"name","remote-url":"/admin/Product/index"},placeholder:e(l)("Please select field",{field:e(l)("carmi.product_id")})},null,8,["modelValue","input-attr","placeholder"]),[[T,e(t).form.items.type=="vip"]])]),_:1},8,["model","label-width","rules"]))],6)]),_:1})),[[S,e(t).form.loading]])]),_:1},8,["model-value","onClose"])}}});export{G as _};
