import{defineComponent as d,ref as g,reactive as k,provide as I,watch as L,resolveComponent as m,resolveDirective as E,openBlock as l,createElementBlock as w,unref as t,createBlock as i,createCommentVNode as u,createVNode as s,withCtx as p,withDirectives as q,createElementVNode as v,toDisplayString as z}from"vue";import{b as N,T as S,a as C}from"./index-0a827c2c.js";import{i as P}from"./controllerUrls-941681c3.js";import{a as R,P as T}from"./popupForm-29bcd487.js";import{an as U,O as x}from"./index-89e26330.js";import{useRoute as A}from"vue-router";import{useI18n as D}from"vue-i18n";import{p as F}from"./parseInt-2b359481.js";import"element-plus";import"./index-d3b20950.js";import"./index-39d73c69.js";import"./validate-e09b6b50.js";import"pinia";import"vue-demi";import"./isSymbol-5418c187.js";const B={class:"default-main ba-table-box"},G={class:"table-header-operate-text"},K=d({name:"user/moneyLog"}),ne=d({...K,setup(V){const{t:e}=D(),f=g(),b=A().query.user_id??"",a=k({userInfo:{}}),r=new N(new U(P),{column:[{type:"selection",align:"center",operator:!1},{label:e("id"),prop:"id",align:"center",operator:"LIKE",operatorPlaceholder:e("Fuzzy query"),width:70},{label:e("user.moneyLog.User ID"),prop:"user_id",align:"center",operator:"=",width:70},{label:e("user.moneyLog.User name"),prop:"user.username",align:"center",operator:"LIKE",operatorPlaceholder:e("Fuzzy query")},{label:e("user.moneyLog.User nickname"),prop:"user.nickname",align:"center",operator:"LIKE",operatorPlaceholder:e("Fuzzy query")},{label:e("user.moneyLog.Change balance"),prop:"money",align:"center",operator:"RANGE",sortable:"custom"},{label:e("user.moneyLog.Before change"),prop:"before",align:"center",operator:"RANGE",sortable:"custom"},{label:e("user.moneyLog.After change"),prop:"after",align:"center",operator:"RANGE",sortable:"custom"},{label:e("user.moneyLog.remarks"),prop:"memo",align:"center",operator:"LIKE",operatorPlaceholder:e("Fuzzy query"),"show-overflow-tooltip":!0},{label:e("createtime"),prop:"createtime",align:"center",render:"datetime",sortable:"custom",operator:"RANGE",width:160}],dblClickNotEditColumn:["all"]},{defaultItems:{user_id:b,memo:""}},{},{onSubmit:()=>{n(r.comSearch.form.user_id)}});r.mount(),r.getIndex(),I("baTable",r);const n=o=>{o&&F(o)>0?R(o).then(c=>{a.userInfo=c.data.user}):a.userInfo={}};return n(r.comSearch.form.user_id),L(()=>r.comSearch.form.user_id,o=>{r.form.defaultItems.user_id=o,n(o)}),(o,c)=>{const h=m("el-alert"),_=m("el-button"),y=E("blur");return l(),w("div",B,[t(r).table.remark?(l(),i(h,{key:0,class:"ba-table-alert",title:t(r).table.remark,type:"info","show-icon":""},null,8,["title"])):u("",!0),s(S,{buttons:["refresh","add","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":t(e)("quick Search Placeholder",{fields:t(e)("user.moneyLog.User name")+"/"+t(e)("user.moneyLog.User nickname")})},{default:p(()=>[t(x)(a.userInfo)?u("",!0):q((l(),i(_,{key:0,class:"table-header-operate"},{default:p(()=>[v("span",G,z(a.userInfo.username+"(ID:"+a.userInfo.id+") "+t(e)("user.moneyLog.balance")+":"+a.userInfo.money),1)]),_:1})),[[y]])]),_:1},8,["quick-search-placeholder"]),s(C,{ref_key:"tableRef",ref:f},null,512),s(T)])}}});export{ne as default};
