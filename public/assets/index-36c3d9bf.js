import{defineComponent as h,ref as v,provide as z,onMounted as x,resolveComponent as a,resolveDirective as k,openBlock as c,createElementBlock as F,createElementVNode as u,unref as t,createBlock as m,createCommentVNode as _,createVNode as l,withCtx as s,withDirectives as B,toDisplayString as q}from"vue";import E from"./popupForm-95e74977.js";import{b as I,T as P,a as T}from"./index-0a827c2c.js";import{r as A}from"./controllerUrls-941681c3.js";import{aB as K,an as L,aj as R,_ as C}from"./index-89e26330.js";import{p as M}from"./index-d3b20950.js";import{useI18n as N}from"vue-i18n";import"element-plus";import"vue-router";import"pinia";import"vue-demi";const S={class:"default-main"},D={class:"ba-table-box"},G={class:"mlr-12"},O={class:"table-header-operate-text"},U=h({name:"routine/attachment"}),V=h({...U,setup(H){const{t:e}=N(),b=v(),f=K(["edit","delete"]);f[1].popconfirm.title=e("routine.attachment.Files and records will be deleted at the same time Are you sure?");const o=new I(new L(A),{column:[{type:"selection",align:"center",operator:!1},{label:e("id"),prop:"id",align:"center",operator:"LIKE",operatorPlaceholder:e("Fuzzy query"),width:70},{label:e("utils.Breakdown"),prop:"topic",align:"center",operator:"LIKE",operatorPlaceholder:e("Fuzzy query")},{label:e("routine.attachment.Upload administrator"),prop:"admin.nickname",align:"center",operator:"LIKE",operatorPlaceholder:e("Fuzzy query")},{label:e("routine.attachment.Upload user"),prop:"user.nickname",align:"center",operator:"LIKE",operatorPlaceholder:e("Fuzzy query")},{label:e("utils.size"),prop:"size",align:"center",formatter:(n,p,d)=>{const i=parseFloat(d),r=Math.floor(Math.log(i)/Math.log(1024));return(i/Math.pow(1024,r)).toFixed(r<1?0:2)+" "+["B","KB","MB","GB","TB"][r]},operator:"RANGE",sortable:"custom",operatorPlaceholder:"bytes"},{label:e("utils.type"),prop:"mimetype",align:"center",operator:"LIKE","show-overflow-tooltip":!0,operatorPlaceholder:e("Fuzzy query")},{label:e("utils.preview"),prop:"suffix",align:"center",renderFormatter:M,render:"image",operator:!1},{label:e("utils.Upload (Reference) times"),prop:"quote",align:"center",width:150,operator:"RANGE",sortable:"custom"},{label:e("utils.Original name"),prop:"name",align:"center","show-overflow-tooltip":!0,operator:"LIKE",operatorPlaceholder:e("Fuzzy query")},{label:e("routine.attachment.Storage mode"),prop:"storage",align:"center",width:100,operator:"LIKE",operatorPlaceholder:e("Fuzzy query")},{label:e("utils.Last upload time"),prop:"lastuploadtime",align:"center",render:"datetime",operator:"RANGE",width:160,sortable:"custom"},{label:e("operate"),align:"center",width:"100",render:"buttons",buttons:f,operator:!1}],defaultOrder:{prop:"lastuploadtime",order:"desc"}});return z("baTable",o),x(()=>{var n;o.table.ref=b.value,o.mount(),(n=o.getIndex())==null||n.then(()=>{o.initSort()})}),(n,p)=>{const d=a("el-alert"),i=a("Icon"),r=a("el-button"),y=a("el-tooltip"),g=a("el-popconfirm"),w=k("blur");return c(),F("div",S,[u("div",D,[t(o).table.remark?(c(),m(d,{key:0,class:"ba-table-alert",title:t(o).table.remark,type:"info","show-icon":""},null,8,["title"])):_("",!0),l(P,{buttons:["refresh","edit","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":t(e)("quick Search Placeholder",{fields:t(e)("utils.Original name")})},{default:s(()=>[t(R)("del")?(c(),m(g,{key:0,onConfirm:p[0]||(p[0]=$=>t(o).onTableHeaderAction("delete",{})),"confirm-button-text":t(e)("delete"),"cancel-button-text":t(e)("Cancel"),confirmButtonType:"danger",title:t(e)("routine.attachment.Files and records will be deleted at the same time Are you sure?"),disabled:!(t(o).table.selection.length>0)},{reference:s(()=>[u("div",G,[l(y,{content:t(e)("Delete selected row"),placement:"top"},{default:s(()=>[B((c(),m(r,{disabled:!(t(o).table.selection.length>0),class:"table-header-operate",type:"danger"},{default:s(()=>[l(i,{color:"#ffffff",name:"fa fa-trash"}),u("span",O,q(t(e)("delete")),1)]),_:1},8,["disabled"])),[[w]])]),_:1},8,["content"])])]),_:1},8,["confirm-button-text","cancel-button-text","title","disabled"])):_("",!0)]),_:1},8,["quick-search-placeholder"]),l(T,{ref_key:"tableRef",ref:b},null,512),l(E)])])}}});const ae=C(V,[["__scopeId","data-v-c1228a22"]]);export{ae as default};
