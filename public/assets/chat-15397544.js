import{defineComponent as V,ref as f,reactive as R,onMounted as S,watch as D,resolveComponent as v,openBlock as r,createElementBlock as a,createVNode as s,unref as e,withCtx as E,createElementVNode as o,Fragment as L,renderList as M,toDisplayString as g,withDirectives as B,vShow as F,createCommentVNode as i}from"vue";import{a as H}from"./chat-5c60e301.js";import{storeToRefs as y}from"pinia";import{u as N}from"./userGpt4-d36019d4.js";import{t as k}from"./timeToDate-4f013b84.js";import{ElScrollbar as z}from"element-plus";import{b as P,_ as G}from"./index-89e26330.js";import{x as w}from"./chat-3c5e52ec.js";import"vue-i18n";import"vue-router";import"vue-demi";const U={class:"chat-content-body"},j={key:0},q=["index"],A={key:0,class:"chat_left"},J={class:"user-avatr"},K={class:"user-avatr-time"},O={class:"dh_action"},Q={key:1,class:"chat_right"},W={class:"user-avatr"},X={class:"user-avatr-time"},Y={class:"chat-speak"},Z=V({__name:"chat",setup($){const l="preview-only",_=f(),d=f();let x=P(),T=N();const{chatMsgList:c,nowChatId:m}=y(T),{avatar:b}=y(x);function u(){let n=_.value.clientHeight;d.value.setScrollTop(n+500)}return R({output:"",isEnd:!1,speed:80,singleBack:!1,sleep:0,type:"normal",backSpeed:40,sentencePause:!1}),S(()=>{u()}),D(c,(n,C)=>{setTimeout(()=>{u()},100)},{deep:!0}),(n,C)=>{const p=v("el-avatar"),h=v("Icon");return r(),a("div",U,[s(e(z),{ref_key:"scrollbarRef",ref:d,style:{overflow:"hidden"},class:"infinite-list chat-content-scroll",always:""},{default:E(()=>[o("div",{ref_key:"innerRef",ref:_},[e(c)[e(m)]?(r(),a("div",j,[(r(!0),a(L,null,M(e(c)[e(m)].msglist,(t,I)=>(r(),a("div",{index:I,class:"scrollbar-demo-item"},[t.role!="user"?(r(),a("div",A,[o("div",J,[s(p,{src:e(H)},null,8,["src"]),o("span",K,g(e(k).setTime(t.time)),1)]),s(e(w),{previewTheme:"vuepress",editorId:l,modelValue:t.msg},null,8,["modelValue"]),B(o("div",O,[s(h,{name:"el-icon-CopyDocument",title:"复制",color:"#8595F4",size:"20"}),s(h,{name:"el-icon-Refresh",title:"重试",color:"#8595F4",size:"20"})],512),[[F,t.isfinish]])])):i("",!0),t.role=="user"?(r(),a("div",Q,[o("div",W,[s(p,{src:e(b)},null,8,["src"]),o("span",X,g(e(k).setTime(t.time)),1)]),o("div",Y,[s(e(w),{previewTheme:"vuepress",editorId:l,modelValue:t.msg},null,8,["modelValue"])])])):i("",!0)],8,q))),256))])):i("",!0)],512)]),_:1},512)])}}});const de=G(Z,[["__scopeId","data-v-d49cf8c2"]]);export{de as default};
