import{defineComponent as m,ref as u,provide as b,onMounted as f,resolveComponent as h,openBlock as c,createElementBlock as g,unref as r,createBlock as _,createCommentVNode as k,createVNode as n}from"vue";import{b as B,T as x,a as E}from"./index-0a827c2c.js";import{aB as T,x as w,an as v}from"./index-89e26330.js";import{useI18n as S}from"vue-i18n";import{_ as C}from"./popupForm.vue_vue_type_script_setup_true_lang-e4b4385d.js";import{ElMessageBox as y}from"element-plus";import"vue-router";import"./controllerUrls-941681c3.js";import"./index-d3b20950.js";import"pinia";import"vue-demi";import"./index-39d73c69.js";import"./validate-e09b6b50.js";const I={class:"default-main ba-table-box"},N=m({name:"sms/template"}),j=m({...N,setup(q){const{t:e}=S(),i=u(),p=T(["edit","delete"]);p.push({render:"tipButton",name:"test_send",title:"sms.template.test_send",text:"",type:"success",icon:"el-icon-MagicStick",class:"table-row-test",disabledTip:!1,click:(a,d)=>{y.prompt(e("sms.template.Please enter the receiver mobile"),e("sms.template.test_send"),{confirmButtonText:e("routine.config.send out"),cancelButtonText:e("Cancel"),inputPattern:/^1\d{10}$/,inputErrorMessage:e("sms.template.Please enter the correct mobile number"),beforeClose:(o,l,s)=>{o==="confirm"?(l.confirmButtonLoading=!0,l.confirmButtonText=e("routine.config.Sending"),w(l.inputValue,a.code).then(()=>{s()}).catch(()=>{s()})):s()}})}});const t=new B(new v("/admin/sms.template/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:e("sms.template.id"),prop:"id",align:"center",width:70,sortable:"custom",operator:"RANGE"},{label:e("sms.template.title"),prop:"title",align:"center",operator:"LIKE"},{label:e("sms.template.code"),prop:"code",align:"center",operator:"LIKE"},{label:e("sms.template.template"),prop:"template",align:"center"},{label:e("sms.template.content"),prop:"content",align:"center","show-overflow-tooltip":!0,operator:"LIKE"},{label:e("sms.template.variables"),prop:"variable_text",render:"tags",operator:!1,align:"center"},{label:e("state"),prop:"status",align:"center",render:"tag",custom:{0:"danger",1:"success"},replaceValue:{0:e("Disable"),1:e("Enable")}},{label:e("sms.template.updatetime"),prop:"updatetime",align:"center",render:"datetime",sortable:"custom",operator:"RANGE",width:160},{label:e("sms.template.createtime"),prop:"createtime",align:"center",render:"datetime",sortable:"custom",operator:"RANGE",width:160},{label:e("operate"),align:"center",width:140,render:"buttons",buttons:p,operator:!1}],dblClickNotEditColumn:[void 0],defaultOrder:{prop:"id",order:"desc"}},{defaultItems:{status:"1"}});return b("baTable",t),f(()=>{var a;t.table.ref=i.value,t.mount(),(a=t.getIndex())==null||a.then(()=>{t.initSort(),t.dragSort()})}),(a,d)=>{const o=h("el-alert");return c(),g("div",I,[r(t).table.remark?(c(),_(o,{key:0,class:"ba-table-alert",title:r(t).table.remark,type:"info","show-icon":""},null,8,["title"])):k("",!0),n(x,{buttons:["refresh","add","edit","delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":r(e)("quick Search Placeholder",{fields:r(e)("sms.template.quick Search Fields")})},null,8,["quick-search-placeholder"]),n(E,{ref_key:"tableRef",ref:i},null,512),n(C)])}}});export{j as default};
