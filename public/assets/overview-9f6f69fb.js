import{defineComponent as L,ref as $,reactive as N,onMounted as P,onBeforeMount as q,toRefs as H,resolveComponent as p,openBlock as d,createElementBlock as h,createVNode as t,withCtx as e,createElementVNode as n,toDisplayString as r,unref as s,createTextVNode as _,createBlock as y,createCommentVNode as J,Fragment as S,renderList as V,normalizeClass as K,normalizeStyle as w,pushScopeId as O,popScopeId as Q}from"vue";import{c as B,b as W,au as X,av as Y,aw as Z,_ as ee}from"./index-89e26330.js";import{useRouter as te}from"vue-router";import{a as z}from"./timeToDate-4f013b84.js";import{storeToRefs as oe}from"pinia";import"vue-i18n";import"vue-demi";import"element-plus";const se="/api/product/";function ae(){return B({url:se+"index",method:"get"})}const ne="/api/hu_pi_jiao_pay/";function ce(u){return B({url:ne+"index",method:"post",data:u})}const le=u=>(O("data-v-95379c8b"),u=u(),Q(),u),re={class:"user-views"},de={class:"card-header"},ie={class:"overview-userinfo"},_e={class:"user-data"},ue={class:"welcome-words"},pe={class:"card-header"},me=le(()=>n("span",null,"开通VIP，尊享会员特权",-1)),fe=["onClick"],ve={class:"chat-vip-dec"},he={class:"to-pay-01"},ye=L({__name:"overview",setup(u){te();const c=W();let{product_id:g,start_time:U,end_time:D,num:E}=oe(c);$();const m=N({days:[],score:[],money:[],charts:[]});let x=$(0),R=a=>{x.value=a},v=N({products:{},product_name:""}),j=async()=>{let a={};a.product=v.products[x.value],a.userinfo=c.getUserInfo();let l=await ce(a);l.data.errmsg=="success!"&&window.open(l.data.url)},A=a=>a.split(`
`);P(async()=>{c.$state.isyouke="";let a=new Date().getTime();c.id!=0&&c.end_time!=0&&a>c.end_time*1e3&&(c.setNum(0),X({id:c.id,num:0}));let l=await ae();l.code==1&&(v.products=l.data,l.data.forEach(o=>{o.id==c.product_id&&(v.product_name=o.name)})),Y().then(o=>{m.days=o.data.days,m.score=o.data.score,m.money=o.data.money})}),q(()=>{for(const a in m.charts)m.charts[a].dispose()});let{products:M,product_name:F}=H(v);return(a,l)=>{const o=p("el-col"),k=p("el-link"),f=p("el-row"),I=p("el-card"),b=p("el-button"),G=p("Icon");return d(),h("div",re,[t(I,{class:"user-views-card",shadow:"hover"},{header:e(()=>[n("div",de,[n("span",null,r(a.$t("user.account.overview.Account information")),1)])]),default:e(()=>[n("div",ie,[n("div",_e,[n("div",ue,r(s(c).nickname+a.$t("utils.comma")+s(Z)()),1),t(f,{class:"data-item chat-isvip"},{default:e(()=>[t(o,{xs:10,sm:10,md:8,lg:6,xl:3},{default:e(()=>[_("会员")]),_:1}),t(o,{xs:14,sm:14,md:16,lg:16,xl:16},{default:e(()=>[s(g)!=0?(d(),y(k,{key:0,type:"primary"},{default:e(()=>[_(" 已开通 [ "+r(s(F))+" ] ",1)]),_:1})):(d(),y(k,{key:1,type:"primary"},{default:e(()=>[_(" 未开通 ")]),_:1}))]),_:1})]),_:1}),s(g)!=0?(d(),y(f,{key:0,class:"data-item chat-isvip"},{default:e(()=>[t(o,{xs:10,sm:10,md:8,lg:6,xl:3},{default:e(()=>[_("有效期")]),_:1}),t(o,{xs:14,sm:14,md:16,lg:16,xl:16},{default:e(()=>[n("span",null,r(s(z).setTime(s(U)))+" 至 "+r(s(z).setTime(s(D))),1)]),_:1})]),_:1})):J("",!0),t(f,{class:"data-item chat-isvip"},{default:e(()=>[t(o,{xs:10,sm:10,md:8,lg:6,xl:3},{default:e(()=>[_("剩余对话次数")]),_:1}),t(o,{xs:14,sm:14,md:16,lg:16,xl:16},{default:e(()=>[n("span",null,r(s(E))+" 次",1)]),_:1})]),_:1})])])]),_:1}),t(I,{class:"box-card"},{header:e(()=>[n("div",pe,[me,t(b,{class:"button",text:""})])]),default:e(()=>[t(f,null,{default:e(()=>[(d(!0),h(S,null,V(s(M),(i,C)=>(d(),y(o,{span:8,xs:24,sm:12,lg:8},{default:e(()=>[n("div",{class:K(["chat-vip",s(x)===C?"current-vip":""]),onClick:T=>s(R)(C)},[n("div",{class:"chat-vip-title",style:w({color:i.color})},[t(G,{name:"iconfont icon-vip1",style:w({color:i.color}),size:"22"},null,8,["style"]),_(" "+r(i.name),1)],4),n("div",{class:"chat-vip-price",style:w({color:i.color})},"￥ "+r(i.price),5),n("div",ve,[(d(!0),h(S,null,V(s(A)(i.dec),T=>(d(),h("p",null,r(T),1))),256))])],10,fe)]),_:2},1024))),256))]),_:1}),t(f,null,{default:e(()=>[t(o,{span:8,class:"to-pay"}),t(o,{span:8,class:"to-pay"}),t(o,{span:8,class:"to-pay"},{default:e(()=>[n("div",he,[t(b,{type:"primary",onClick:l[0]||(l[0]=i=>s(j)())},{default:e(()=>[_("立即开通")]),_:1})])]),_:1})]),_:1})]),_:1})])}}});const $e=ee(ye,[["__scopeId","data-v-95379c8b"]]);export{$e as default};
