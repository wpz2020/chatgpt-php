var Z=Object.defineProperty;var G=(o,i,m)=>i in o?Z(o,i,{enumerable:!0,configurable:!0,writable:!0,value:m}):o[i]=m;var f=(o,i,m)=>(G(o,typeof i!="symbol"?i+"":i,m),m);import{d as O,v as X,Z as ee,r as I,H as b,$ as te,o as ae,V as oe,Q as ne,c as L,g as r,a,b as s,a0 as se,N as le,e as c,C as ie,D as ce,a1 as M,f as v,F as re,J as de,j as p,Y as q,a2 as ue,x as pe,h as B,i as S,a3 as me,a4 as he,a5 as fe,_ as _e}from"./index-9250cf41.js";import{l as N}from"./index-611974f5.js";import{b as g}from"./validate-d30190a1.js";const ge="/assets/login-header-2b702f97.png",we="/assets/avatar-a1b16617.png",e={width:0,height:0,bubbleEl:null,canvas:null,ctx:{},circles:[],animate:!0,requestId:null},be=function(){e.width=window.innerWidth,e.height=window.innerHeight,e.bubbleEl=document.getElementById("bubble"),e.bubbleEl.style.height=e.height+"px",e.canvas=document.getElementById("bubble-canvas"),e.canvas.width=e.width,e.canvas.height=e.height,e.ctx=e.canvas.getContext("2d"),e.circles=[];for(let o=0;o<e.width*.5;o++){const i=new ve;e.circles.push(i)}F(),xe()};function T(){e.animate=!(document.body.scrollTop>e.height)}function U(){e.width=window.innerWidth,e.height=window.innerHeight,e.bubbleEl.style.height=e.height+"px",e.canvas.width=e.width,e.canvas.height=e.height}function F(){if(e.animate){e.ctx.clearRect(0,0,e.width,e.height);for(const o in e.circles)e.circles[o].draw()}e.requestId=requestAnimationFrame(F)}class ve{constructor(){f(this,"pos");f(this,"alpha");f(this,"scale");f(this,"velocity");f(this,"draw");this.pos={x:Math.random()*e.width,y:e.height+Math.random()*100},this.alpha=.1+Math.random()*.3,this.scale=.1+Math.random()*.3,this.velocity=Math.random(),this.draw=function(){this.pos.y-=this.velocity,this.alpha-=5e-4,e.ctx.beginPath(),e.ctx.arc(this.pos.x,this.pos.y,this.scale*10,0,2*Math.PI,!1),e.ctx.fillStyle="rgba(255,255,255,"+this.alpha+")",e.ctx.fill()}}}function xe(){window.addEventListener("scroll",T),window.addEventListener("resize",U)}function ye(){window.removeEventListener("scroll",T),window.removeEventListener("resize",U),cancelAnimationFrame(e.requestId)}const C=o=>(ie("data-v-51f07815"),o=o(),ce(),o),ke={class:"switch-language"},Ie=C(()=>r("canvas",{id:"bubble-canvas",class:"bubble-canvas"},null,-1)),Ce=[Ie],Ve={class:"login"},ze={class:"login-box"},Ee=C(()=>r("div",{class:"head"},[r("img",{src:ge,alt:""})],-1)),Pe={class:"form"},Re=C(()=>r("img",{class:"profile-avatar",src:we,alt:""},null,-1)),Le={class:"content"},Me=["src"],qe=O({__name:"login",setup(o){var i;const m=X(),$=ee(),_=I({showCaptcha:!1,captchaId:M()}),x=()=>{t.captcha="",_.captchaId=M()},y=b(),V=b(),z=b(),E=b(),t=I({username:"",password:"",captcha:"",keep:!1,loading:!1,captcha_id:""}),{t:d}=te(),A=I({username:[g({name:"required",message:d("login.Please enter an account")}),g({name:"account"})],password:[g({name:"required",message:d("login.Please input a password")}),g({name:"password"})],captcha:[g({name:"required",title:d("login.Please enter the verification code")}),{min:4,max:6,message:d("login.The verification code length must be between 4 and 6 bits"),trigger:"blur"}]}),D=()=>{t.username===""?V.value.focus():t.password===""?z.value.focus():t.captcha===""&&E.value.focus()};ae(()=>{i=setTimeout(()=>{be()},1e3),N("get").then(h=>{_.showCaptcha=h.data.captcha,oe(()=>{D()})}).catch(h=>{console.log(h)})}),ne(()=>{clearTimeout(i),ye()});const P=h=>{h&&h.validate(n=>{if(n)t.loading=!0,t.captcha_id=_.captchaId,N("post",t).then(u=>{t.loading=!1,$.dataFill(u.data.userInfo),me({message:u.msg,type:"success"}),he.push({path:u.data.routePath})}).catch(()=>{x(),t.loading=!1});else return x(),!1})};return(h,n)=>{const u=c("Icon"),H=c("el-dropdown-item"),K=c("el-dropdown-menu"),W=c("el-dropdown"),k=c("el-input"),w=c("el-form-item"),R=c("el-col"),j=c("el-row"),J=c("el-checkbox"),Q=c("el-button"),Y=c("el-form");return v(),L("div",null,[r("div",ke,[a(W,{size:"large","hide-timeout":50,placement:"bottom-end","hide-on-click":!0},{dropdown:s(()=>[a(K,{class:"chang-lang"},{default:s(()=>[(v(!0),L(re,null,de(p(m).lang.langArray,l=>(v(),q(H,{key:l.name,onClick:Be=>p(fe)(l.name)},{default:s(()=>[B(S(l.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:s(()=>[a(u,{name:"fa fa-globe",color:"var(--el-text-color-secondary)",size:"28"})]),_:1})]),r("div",{onContextmenu:n[0]||(n[0]=se(()=>{},["stop"])),id:"bubble",class:"bubble"},Ce,32),r("div",Ve,[r("div",ze,[Ee,r("div",Pe,[Re,r("div",Le,[a(Y,{onKeyup:n[6]||(n[6]=le(l=>P(y.value),["enter"])),ref_key:"formRef",ref:y,rules:A,size:"large",model:t},{default:s(()=>[a(w,{prop:"username"},{default:s(()=>[a(k,{ref_key:"usernameRef",ref:V,type:"text",clearable:"",modelValue:t.username,"onUpdate:modelValue":n[1]||(n[1]=l=>t.username=l),placeholder:p(d)("login.Please enter an account")},{prefix:s(()=>[a(u,{name:"fa fa-user",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["modelValue","placeholder"])]),_:1}),a(w,{prop:"password"},{default:s(()=>[a(k,{ref_key:"passwordRef",ref:z,modelValue:t.password,"onUpdate:modelValue":n[2]||(n[2]=l=>t.password=l),type:"password",placeholder:p(d)("login.Please input a password"),"show-password":""},{prefix:s(()=>[a(u,{name:"fa fa-unlock-alt",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["modelValue","placeholder"])]),_:1}),_.showCaptcha?(v(),q(w,{key:0,prop:"captcha"},{default:s(()=>[a(j,{class:"w100",gutter:15},{default:s(()=>[a(R,{span:16},{default:s(()=>[a(k,{ref_key:"captchaRef",ref:E,type:"text",placeholder:p(d)("login.Please enter the verification code"),modelValue:t.captcha,"onUpdate:modelValue":n[3]||(n[3]=l=>t.captcha=l),clearable:"",autocomplete:"off"},{prefix:s(()=>[a(u,{name:"fa fa-ellipsis-h",class:"form-item-icon",size:"16",color:"var(--el-input-icon-color)"})]),_:1},8,["placeholder","modelValue"])]),_:1}),a(R,{span:8},{default:s(()=>[r("img",{onClick:x,class:"captcha-img",src:p(ue)()+"&id="+_.captchaId,alt:""},null,8,Me)]),_:1})]),_:1})]),_:1})):pe("",!0),a(J,{modelValue:t.keep,"onUpdate:modelValue":n[4]||(n[4]=l=>t.keep=l),label:p(d)("login.Hold session"),size:"default"},null,8,["modelValue","label"]),a(w,null,{default:s(()=>[a(Q,{loading:t.loading,class:"submit-button",round:"",type:"primary",size:"large",onClick:n[5]||(n[5]=l=>P(y.value))},{default:s(()=>[B(S(p(d)("login.Sign in")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["rules","model"])])])])])])}}});const Fe=_e(qe,[["__scopeId","data-v-51f07815"]]);export{Fe as default};
