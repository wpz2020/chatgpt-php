import{d as T,H as Y,$ as j,r as q,w as B,f as u,Y as n,b as s,z as w,c as E,h as f,i as b,j as e,g as C,a as t,I as S,N as k,x as U,a0 as F,y as L,R as K,a4 as M,e as i,aC as c,_ as R}from"./index-9250cf41.js";import{b as V,r as W}from"./validate-d30190a1.js";import{F as g}from"./index-5cf5ba2e.js";import{u as G}from"./controllerUrls-941681c3.js";import"./index-47490f62.js";import"./index-bb9265a5.js";const H={class:"title"},J=T({__name:"popupForm",setup(O){const _=Y(),l=K("baTable"),{t:r}=j(),P=q({username:[V({name:"required",title:r("user.user.User name")}),V({name:"account"})],nickname:[V({name:"required",title:r("user.user.nickname")})],email:[V({name:"email",title:r("user.user.email")})],mobile:[V({name:"mobile"})],password:[{validator:(p,o,m)=>{if(l.form.operate=="add"){if(!o)return m(new Error(r("Please input field",{field:r("user.user.password")})))}else if(!o)return m();return W(o)?m():m(new Error(r("validate.Please enter the correct password")))},trigger:"blur"}]}),x=p=>{l.toggleForm(),M.push({name:p=="money"?"user/moneyLog":"user/scoreLog",query:{user_id:l.form.items.id}})};return B(()=>l.form.operate,p=>{P.password[0].required=p=="add"}),(p,o)=>{const m=i("el-input"),d=i("el-form-item"),v=i("el-date-picker"),y=i("el-button"),D=i("el-form"),$=i("el-scrollbar"),h=i("el-dialog"),I=c("drag"),z=c("zoom"),A=c("loading"),N=c("blur");return u(),n(h,{class:"ba-operate-dialog","close-on-click-modal":!1,"destroy-on-close":!0,"model-value":!!e(l).form.operate,onClose:e(l).toggleForm},{header:s(()=>[w((u(),E("div",H,[f(b(e(l).form.operate?e(r)(e(l).form.operate):""),1)])),[[I,[".ba-operate-dialog",".el-dialog__header"]],[z,".ba-operate-dialog"]])]),footer:s(()=>[C("div",{style:S("width: calc(100% - "+e(l).form.labelWidth/1.8+"px)")},[t(y,{onClick:o[22]||(o[22]=a=>e(l).toggleForm(""))},{default:s(()=>[f(b(e(r)("Cancel")),1)]),_:1}),w((u(),n(y,{loading:e(l).form.submitLoading,onClick:o[23]||(o[23]=a=>e(l).onSubmit(_.value)),type:"primary"},{default:s(()=>[f(b(e(l).form.operateIds&&e(l).form.operateIds.length>1?e(r)("Save and edit next item"):e(r)("Save")),1)]),_:1},8,["loading"])),[[N]])],4)]),default:s(()=>[w((u(),n($,{class:"ba-table-form-scrollbar"},{default:s(()=>[C("div",{class:L(["ba-operate-form","ba-"+e(l).form.operate+"-form"]),style:S("width: calc(100% - "+e(l).form.labelWidth/2+"px)")},[e(l).form.loading?U("",!0):(u(),n(D,{key:0,ref_key:"formRef",ref:_,onKeyup:o[21]||(o[21]=k(a=>e(l).onSubmit(_.value),["enter"])),model:e(l).form.items,"label-position":"right","label-width":e(l).form.labelWidth+"px",rules:P},{default:s(()=>[t(d,{prop:"username",label:e(r)("user.user.User name")},{default:s(()=>[t(m,{modelValue:e(l).form.items.username,"onUpdate:modelValue":o[0]||(o[0]=a=>e(l).form.items.username=a),type:"string",placeholder:e(r)("Please input field",{field:e(r)("user.user.User name")+"("+e(r)("user.user.Login account")+")"})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d,{prop:"nickname",label:e(r)("user.user.nickname")},{default:s(()=>[t(m,{modelValue:e(l).form.items.nickname,"onUpdate:modelValue":o[1]||(o[1]=a=>e(l).form.items.nickname=a),type:"string",placeholder:e(r)("Please input field",{field:e(r)("user.user.nickname")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(g,{type:"remoteSelect",label:e(r)("user.user.grouping"),modelValue:e(l).form.items.group_id,"onUpdate:modelValue":o[2]||(o[2]=a=>e(l).form.items.group_id=a),placeholder:e(r)("user.user.grouping"),"input-attr":{params:{isTree:!0,search:[{field:"status",val:"1",operator:"="}]},field:"name","remote-url":e(G)+"index"}},null,8,["label","modelValue","placeholder","input-attr"]),t(g,{label:e(r)("user.user.head portrait"),type:"image",modelValue:e(l).form.items.avatar,"onUpdate:modelValue":o[3]||(o[3]=a=>e(l).form.items.avatar=a)},null,8,["label","modelValue"]),t(g,{type:"remoteSelect",label:"会员套餐",modelValue:e(l).form.items.product_id,"onUpdate:modelValue":o[4]||(o[4]=a=>e(l).form.items.product_id=a),placeholder:"请选择会员套餐","input-attr":{params:{isTree:!0,search:[]},field:"name","remote-url":"/admin/product/index"}},null,8,["modelValue"]),t(d,{prop:"num",label:"剩余聊天次数"},{default:s(()=>[t(m,{modelValue:e(l).form.items.num,"onUpdate:modelValue":o[5]||(o[5]=a=>e(l).form.items.num=a),type:"string",placeholder:e(r)("Please input field",{field:"剩余聊天次数"})},null,8,["modelValue","placeholder"])]),_:1}),t(d,{prop:"start_time",label:"会员起始时间"},{default:s(()=>[t(v,{class:"w100",modelValue:e(l).form.items.start_time,"onUpdate:modelValue":o[6]||(o[6]=a=>e(l).form.items.start_time=a),render:"datetime",placeholder:e(r)("Please select field",{field:"会员起始时间"})},null,8,["modelValue","placeholder"])]),_:1}),t(d,{prop:"end_time",label:"会员结束时间"},{default:s(()=>[t(v,{class:"w100",modelValue:e(l).form.items.end_time,"onUpdate:modelValue":o[7]||(o[7]=a=>e(l).form.items.end_time=a),render:"datetime",placeholder:e(r)("Please select field",{field:"会员结束时间"})},null,8,["modelValue","placeholder"])]),_:1}),t(d,{prop:"email",label:e(r)("user.user.email")},{default:s(()=>[t(m,{modelValue:e(l).form.items.email,"onUpdate:modelValue":o[8]||(o[8]=a=>e(l).form.items.email=a),type:"string",placeholder:e(r)("Please input field",{field:e(r)("user.user.email")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d,{prop:"mobile",label:e(r)("user.user.mobile")},{default:s(()=>[t(m,{modelValue:e(l).form.items.mobile,"onUpdate:modelValue":o[9]||(o[9]=a=>e(l).form.items.mobile=a),type:"string",placeholder:e(r)("Please input field",{field:e(r)("user.user.mobile")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(g,{label:e(r)("user.user.Gender"),modelValue:e(l).form.items.gender,"onUpdate:modelValue":o[10]||(o[10]=a=>e(l).form.items.gender=a),type:"radio",data:{content:{0:e(r)("unknown"),1:e(r)("user.user.male"),2:e(r)("user.user.female")},childrenAttr:{border:!0}}},null,8,["label","modelValue","data"]),t(d,{label:e(r)("user.user.birthday")},{default:s(()=>[t(v,{class:"w100","value-format":"YYYY-MM-DD",modelValue:e(l).form.items.birthday,"onUpdate:modelValue":o[11]||(o[11]=a=>e(l).form.items.birthday=a),type:"date",placeholder:e(r)("Please select field",{field:e(r)("user.user.birthday")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(l).form.operate=="edit"?(u(),n(d,{key:0,label:e(r)("user.user.balance")},{default:s(()=>[t(m,{modelValue:e(l).form.items.money,"onUpdate:modelValue":o[13]||(o[13]=a=>e(l).form.items.money=a),readonly:""},{append:s(()=>[t(y,{onClick:o[12]||(o[12]=a=>x("money"))},{default:s(()=>[f(b(e(r)("user.user.Adjustment balance")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):U("",!0),e(l).form.operate=="edit"?(u(),n(d,{key:1,label:e(r)("user.user.integral")},{default:s(()=>[t(m,{modelValue:e(l).form.items.score,"onUpdate:modelValue":o[15]||(o[15]=a=>e(l).form.items.score=a),readonly:""},{append:s(()=>[t(y,{onClick:o[14]||(o[14]=a=>x("score"))},{default:s(()=>[f(b(e(r)("user.user.Adjust integral")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):U("",!0),t(d,{prop:"password",label:e(r)("user.user.password")},{default:s(()=>[t(m,{modelValue:e(l).form.items.password,"onUpdate:modelValue":o[16]||(o[16]=a=>e(l).form.items.password=a),type:"password",placeholder:e(l).form.operate=="add"?e(r)("Please input field",{field:e(r)("user.user.password")}):e(r)("user.user.Please leave blank if not modified")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d,{prop:"motto",label:e(r)("user.user.Personal signature")},{default:s(()=>[t(m,{onKeyup:[o[17]||(o[17]=k(F(()=>{},["stop"]),["enter"])),o[18]||(o[18]=k(F(a=>e(l).onSubmit(_.value),["ctrl"]),["enter"]))],modelValue:e(l).form.items.motto,"onUpdate:modelValue":o[19]||(o[19]=a=>e(l).form.items.motto=a),type:"textarea",placeholder:e(r)("Please input field",{field:e(r)("user.user.Personal signature")})},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(g,{label:e(r)("state"),modelValue:e(l).form.items.status,"onUpdate:modelValue":o[20]||(o[20]=a=>e(l).form.items.status=a),type:"radio",data:{content:{disable:e(r)("Disable"),enable:e(r)("Enable")},childrenAttr:{border:!0}}},null,8,["label","modelValue","data"])]),_:1},8,["model","label-width","rules"]))],6)]),_:1})),[[A,e(l).form.loading]])]),_:1},8,["model-value","onClose"])}}});const re=R(J,[["__scopeId","data-v-95b81f9b"]]);export{re as default};
